!function(e){function t(t){for(var a,r,s=t[0],l=t[1],d=t[2],u=0,h=[];u<s.length;u++)r=s[u],i[r]&&h.push(i[r][0]),i[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(c&&c(t);h.length;)h.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(a=!1)}a&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},i={4:0},o=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="https://assets.3dtotal.com/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var c=l;o.push([174,0]),n()}({10:function(e,t,n){"use strict";function a(e){var t=e.trim().split(" ");return t.length<=2?t[0]:"".concat(t[0]," ").concat(t[t.length-1][0])}function i(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var a=n(0);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"order",value:function(){var t=[],n=[],a=e._getEmptySlotElms();if(a.length>0){var i=!0,o=!1,r=void 0;try{for(var s,l=a[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var d=s.value;d.dataset.vendorSold="";var c=e._buildSpec(d);c&&(t.push(d),n.push(c))}}catch(e){o=!0,r=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw r}}var u=JSON.stringify(n),h=e._poster(t),m=null;window.URL&&(m=new URL(window.location).searchParams.get("preview_ad")),m?fetch("/x/a?manifest=".concat(u,"&preview_ad=").concat(m)).then((function(e){return e.json()})).then((function(e){h(e.payload.vendor_contents||[])})):fetch("/x/a?manifest=".concat(u)).then((function(e){return e.json()})).then((function(e){h(e.payload.vendor_contents||[])}))}}},{key:"_buildSpec",value:function(e){var t={};return"vendorCard"in e.dataset?(t.type="card",t.tags=e.dataset.vendorTags.split("|").map(Function.prototype.call,String.prototype.trim),t.premium="vendorPremium"in e.dataset):"vendorTextcard"in e.dataset?(t.type="textcard",t.tags=e.dataset.vendorTags.split("|").map(Function.prototype.call,String.prototype.trim),t.premium="vendorPremium"in e.dataset):"vendorMidPage"in e.dataset?(t.type="mid-page",t.tags=e.dataset.vendorTags.split("|").map(Function.prototype.call,String.prototype.trim)):"vendorTakeover"in e.dataset&&(t.type="takeover",t.path=e.dataset.vendorPath,t.home="vendorHome"in e.dataset),t}},{key:"_getEmptySlotElms",value:function(){return a.many("[data-vendor-card]:not([data-vendor-sold]), [data-vendor-textcard]:not([data-vendor-sold]), [data-vendor-mid-page]:not([data-vendor-sold]), [data-vendor-takeover]:not([data-vendor-sold])")}},{key:"_poster",value:function(t){return function(n){for(var a=0;a<n.length;a+=1){var i=t[a],o=n[a];if(null!==o)switch(o.type){case"Card image":e._postCardImage(i,o);break;case"Card image + text":e._postCardImageText(i,o);break;case"Mid-page":e._postMidPage(i,o);break;case"Page takeover":case"Homepage takeover":e._postTakeover(i,o);break;case"Custom takeover":e._postCustomTakeover(i,o)}}}}},{key:"_postCardImage",value:function(e,t){var n=a.create("img",{src:t.card_image});a.listen(n,{load:function(){var n=t.card_image,i=a.create("a",{class:"vendor-card__image",href:t.url,rel:"nofollow",style:"background-image: url(".concat(n,")"),target:"_blank","data-on-click":"referral","data-on-id":t.run,"data-on-seen":"impression","data-on-type":"vendor-post"}),o=a.create("span",{class:"sr-only"});o.textContent=t.copy,i.appendChild(o),e.appendChild(i);var r=e.style.width;e.style.width="99.999%",e.style.width=r}})}},{key:"_postCardImageText",value:function(e,t){var n=a.create("img",{src:t.card_image});a.listen(n,{load:function(){var n=a.create("a",{class:"vendor-card__mixed",href:t.url,rel:"nofollow",target:"_blank","data-on-click":"referral","data-on-id":t.run,"data-on-seen":"impression","data-on-type":"vendor-post"}),i=t.card_image,o=a.create("span",{class:"vendor-card__text-image",style:"background-image: url(".concat(i,")")}),r=a.create("span",{class:"vendor-card__text"});r.textContent=t.copy,n.appendChild(o),n.appendChild(r),e.appendChild(n),e.style.width="99.999%",e.style.width="100%"}})}},{key:"_postMidPage",value:function(e,t){var n=a.one("[data-vendor-mid-page-bkg]",e),i=a.one("[data-vendor-mid-page-content]",e);n.style.backgroundColor="#".concat(t.background_colour),t.background_image&&(n.style.backgroundImage="url(".concat(t.background_image,")"));var o=a.create("a",{class:"vendor-mid-page__link",href:t.url,rel:"nofollow",target:"_blank","data-on-click":"referral","data-on-id":t.run,"data-on-seen":"impression","data-on-type":"vendor-post"}),r=a.create("span",{class:"vendor-mid-page__image  vendor-mid-page__image--1",style:"background-image: url(".concat(t.foreground_image_1,")")}),s=a.create("span",{class:"vendor-mid-page__image  vendor-mid-page__image--2",style:"background-image: url(".concat(t.foreground_image_2,")")}),l=a.create("span",{class:"vendor-mid-page__image  vendor-mid-page__image--3",style:"background-image: url(".concat(t.foreground_image_3,")")});o.appendChild(r),o.appendChild(s),o.appendChild(l),i.appendChild(o)}},{key:"_postTakeover",value:function(e,t){var n=a.one("[data-vendor-target]",e)||e;if(e.style.backgroundColor="#".concat(t.background_colour),t.background_image){var i="repeat-y",o="100%",r=t.background_image;t.background_repeat&&(i=t.background_repeat);var s="url(".concat(r,") ").concat(i);t.background_size&&(o=t.background_size),e.style.background=s,e.style.backgroundSize="".concat(o),e.style.backgroundColor="#".concat(t.background_colour)}var l=a.create("a",{class:"vendor-takeover__link",href:t.url,rel:"nofollow",target:"_blank","data-on-click":"referral","data-on-id":t.run,"data-on-seen":"impression","data-on-type":"vendor-post"}),d=a.create("span",{class:"vendor-takeover__image  vendor-takeover__image--1",style:"background-image: url(".concat(t.foreground_image_1,")")}),c=a.create("span",{class:"vendor-takeover__image  vendor-takeover__image--2",style:"background-image: url(".concat(t.foreground_image_2,")")}),u=a.create("span",{class:"vendor-takeover__image  vendor-takeover__image--3",style:"background-image: url(".concat(t.foreground_image_3,")")});l.appendChild(d),l.appendChild(c),l.appendChild(u),n.appendChild(l)}},{key:"_postCustomTakeover",value:function(e,t){(a.one("[data-vendor-target]",e)||e).innerHTML=t.custom_template}}],(n=null)&&i(t.prototype,n),o&&i(t,o),e}();function r(){o.order()}},174:function(e,t,n){n(208),e.exports=n(175)},175:function(e,t,n){e.exports=n.p+"site.c5ff1d7956ae08f48e07170e56b0a18a.css"},18:function(e,t,n){"use strict";var a=n(0),i=n(8),o=(n(20),n(3)),r=n(25);n(4);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var c=function(){function e(t,n){s(this,e),this._dom={container:t,author:null},this._dom.author=a.create("a",{class:"metadata__author | author",href:n.url});var i=a.create("div",{class:"author__pic"});if(n.picture){var o=n.picture.variations.medium.url;i.style.backgroundImage="url('".concat(o,"')")}this._dom.author.appendChild(i);var r=a.create("div",{class:"author__name"});r.textContent=n.name,this._dom.author.appendChild(r),t.appendChild(this._dom.author)}return d(e,[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.author)}}]),e}(),u=function(){function e(t,n){s(this,e),this._dom={container:t,details:null},this._dom.details=a.create("div",{class:"metadata__details"});var i=a.create("div",{class:"metadata__title"});i.textContent=n.title,this._dom.details.appendChild(i);var o=a.create("ul",{class:"metadata__stats | stats","data-stats":n._id,"data-stats-type":"creation"});this._dom.details.appendChild(o);var r=a.create("li",{class:"stats__stat | stats__stat--views"});o.appendChild(r);var l=a.create("span",{class:"stats__number","data-stat-views":n._id});l.textContent="-",r.appendChild(l);var d=a.create("span",{class:"stats__tooltip"});d.textContent="Unique views",r.appendChild(d);var c=a.create("li",{class:"stats__stat | stats__stat--likes","data-stat-likes":n._id});c.textContent="-",o.appendChild(c),this._dom.container.appendChild(this._dom.details)}return d(e,[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.details)}}]),e}(),h=function(){function e(t,n){s(this,e),this._dom={container:t,title:null},this._dom.metadata=a.create("div",{class:"metadata"}),this._creation=new u(this._dom.metadata,n),this._author=new c(this._dom.metadata,n.member),this._actions=new r.a(this._dom.metadata,n),this._actions.actions.classList.add("metadata__actions"),this._dom.container.appendChild(this._dom.metadata)}return d(e,[{key:"destroy",value:function(){this._creation.destroy(),this._author.destroy(),this._actions.destroy(),this._dom.container.removeChild(this._dom.metadata)}}]),e}(),m=n(2),_=n(5);function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function g(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}var w=function(){function e(t,n,i,o){var r=this;v(this,e),this._activeLayer=null,this._layers=n,this._mode="pan",this._grabbedOffset=null,this._grabbedPosition=null,this._axes=i||["x","y"],this._viewportSize=o,this._dom={container:t,parallax:null},this._handlers={drag:function(e){if("position"===r._mode&&null!==r._activeLayer&&null!==r._grabbedOffset){var t=Object(_.a)(e),n=r._dom.parallax.getBoundingClientRect(),a=t[0]-r._grabbedOffset[0],i=t[1]-r._grabbedOffset[1],o=a/n.width*100,s=i/n.height*100,l=r._layers[r._activeLayer];l.user_meta.pos[0]=o+r._grabbedPosition[0],l.user_meta.pos[1]=s+r._grabbedPosition[1],r._syncViewport()}},dragEnd:function(e){if("position"===r._mode&&null!==r._activeLayer&&null!==r._grabbedOffset){var t=a.one('[name="layers"]');t&&(t.value=JSON.stringify(r._layers)),r._grabbedOffset=null,r._grabbedPosition=null}},dragStart:function(e){if("position"===r._mode&&("mousedown"!==e.type.toLowerCase()||1===e.which)){e.preventDefault();var t=r._layers[r._activeLayer];r._grabbedOffset=Object(_.a)(e),r._grabbedPosition=t.user_meta.pos.slice()}},fit:function(){Object(m.a)(r._dom.container,r._dom.parallax,r._viewportSize)},pan:function(e){if("pan"===r._mode){var t=document.documentElement,n=t.scrollTop,a=t.scrollLeft,i=f(Object(_.a)(e),2),o=i[0],s=i[1],l=r._dom.parallax.getBoundingClientRect(),d=o-l.left-a,c=s-l.top-n,u=0,h=0,m=0,p=0;"x"===r._axes[0]?(u=2*(d/l.width-.5),u=Math.min(1,Math.max(-1,u))):(m=d/l.width,m=Math.min(1,Math.max(0,m))),"y"===r._axes[1]?(h=2*(c/l.height-.5),h=Math.min(1,Math.max(-1,h))):(m=c/l.height-.5,m=Math.min(.5,Math.max(-.5,m)),p=1);var v=!0,y=!1,g=void 0;try{for(var w,b=r._layers.entries()[Symbol.iterator]();!(v=(w=b.next()).done);v=!0){var k=f(w.value,2),x=k[0],C=k[1],S=r._dom.parallax.children[x],T=C.user_meta.mov,O=T[0]*u,j=T[1]*h,I=T[p]*m;S.style.transform="\n                        translate(".concat(O,"%, ").concat(j,"%)\n                        scale(").concat(1+I/100,")\n                        ")}}catch(e){y=!0,g=e}finally{try{v||null==b.return||b.return()}finally{if(y)throw g}}}}},this._dom.parallax=a.create("div",{class:"big-screen__parallax | parallax"}),this._dom.container.appendChild(this._dom.parallax);var s=f(o,2),l=s[0],d=s[1],c=!0,u=!1,h=void 0;try{for(var p,y=this._layers.entries()[Symbol.iterator]();!(c=(p=y.next()).done);c=!0){var g=f(p.value,2),w=(g[0],g[1]),b=w.core_meta.image.size;w.user_meta.pos||(w.user_meta.pos=[(l-b[0])/l/2*100,(d-b[1])/d/2*100]),w.user_meta.mov||(w.user_meta.mov=[0,0])}}catch(e){u=!0,h=e}finally{try{c||null==y.return||y.return()}finally{if(u)throw h}}var k=!0,x=!1,C=void 0;try{for(var S,T=this._layers.entries()[Symbol.iterator]();!(k=(S=T.next()).done);k=!0){var O=f(S.value,2),j=O[0],I=O[1],P=I.core_meta.image.size,E=I.user_meta.pos,L=P[0]/o[0]*100,A=P[1]/o[1]*100,F=a.create("div",{class:"parallax__layer parallax__layer--".concat(j),style:"\n                        background-image: url('".concat(I.url,"');\n                        height: ").concat(A,"%;\n                        left: ").concat(E[0],"%;\n                        top: ").concat(E[1],"%;\n                        width: ").concat(L,"%;\n                    ")});this._dom.parallax.appendChild(F)}}catch(e){x=!0,C=e}finally{try{k||null==T.return||T.return()}finally{if(x)throw C}}a.listen(this._dom.parallax,{"mousemove touchmove":this._handlers.pan}),a.listen(this._dom.parallax,{mousedown:this._handlers.dragStart,touchstart:this._handlers.dragStart}),a.listen(document,{mousemove:this._handlers.drag,mouseup:this._handlers.dragEnd,touchmove:this._handlers.drag,touchend:this._handlers.dragEnd}),a.listen(window,{resize:this._handlers.fit}),setTimeout((function(){r._handlers.fit()}),0)}return g(e,[{key:"blurActiveLayers",value:function(e){this._activeLayer=null;for(var t=0,n=Array.from(this._dom.parallax.children);t<n.length;t++){delete n[t].dataset.active}}},{key:"destroy",value:function(){a.ignore(window,{resize:this._handlers.fit}),a.ignore(document,{mousemove:this._handlers.drag,mouseup:this._handlers.dragEnd,touchmove:this._handlers.drag,touchend:this._handlers.dragEnd}),this._dom.container.removeChild(this._dom.parallax)}},{key:"getLayerMov",value:function(e){return this.layers[e].user_meta.mov}},{key:"setActiveLayer",value:function(e){this.blurActiveLayers(),this._activeLayer=e,this._dom.parallax.children[e].dataset.active=""}},{key:"setMode",value:function(e){this._mode=e,"position"===this._mode&&this._syncViewport()}},{key:"setLayerMov",value:function(e,t){this._layers[e].user_meta.mov=t;var n=a.one('[name="layers"]');n&&(n.value=JSON.stringify(this._layers))}},{key:"_syncViewport",value:function(){Object(m.a)(this._dom.container,this._dom.parallax,this._viewportSize);var e=!0,t=!1,n=void 0;try{for(var a,i=this._layers.entries()[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=f(a.value,2),r=o[0],s=o[1],l=s.core_meta.image.size,d=s.user_meta.pos,c=l[0]/this._viewportSize[0]*100,u=l[1]/this._viewportSize[1]*100,h=this._dom.parallax.children[r];h.style.height="".concat(u,"%"),h.style.left="".concat(d[0],"%"),h.style.top="".concat(d[1],"%"),h.style.width="".concat(c,"%"),h.style.transform="none"}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"axes",get:function(){return this._axes.slice()},set:function(e){this._axes=e,this._syncViewport();var t=a.one('[name="parallax_axis_x"]'),n=a.one('[name="parallax_axis_y"]');if(t&&n){var i=f(e,2);t.value=i[0],n.value=i[1]}}},{key:"layers",get:function(){return this._layers.slice()}},{key:"viewportSize",get:function(){return this._viewportSize.slice()},set:function(e){this._viewportSize=e,this._syncViewport();var t=a.one('[name="parallax_viewer_width"]'),n=a.one('[name="parallax_viewer_height"]');if(t&&n){var i=f(e,2);t.value=i[0],n.value=i[1]}}}]),e}(),b=function(){function e(t,n){var i=this;v(this,e),this._dom={container:t,control:null,xSelect:null,ySelect:null},this._handlers={changeX:function(e){"z"===i._dom.xSelect.value&&(i._dom.ySelect.value="y"),a.dispatch(i._dom.control,"changed",{axes:[i._dom.xSelect.value,i._dom.ySelect.value]})},changeY:function(e){"z"===i._dom.ySelect.value&&(i._dom.xSelect.value="x"),a.dispatch(i._dom.control,"changed",{axes:[i._dom.xSelect.value,i._dom.ySelect.value]})}},this._dom.control=a.create("div",{class:"parallax-editor__control axis"});var o=a.create("div",{class:"axis__axis"});this._dom.control.appendChild(o);var r=a.create("label",{class:"axis__label"});r.textContent="x",o.appendChild(r),this._dom.xSelect=a.create("select",{class:"axis__select",name:"x"}),r.appendChild(this._dom.xSelect);for(var s=0,l=["x","z"];s<l.length;s++){var d=l[s],c=a.create("option",{value:d});c.textContent=d,c.selected=d===n[0],this._dom.xSelect.appendChild(c)}var u=a.create("div",{class:"axis__axis"});this._dom.control.appendChild(u);var h=a.create("label",{class:"axis__label"});h.textContent="y",u.appendChild(h),this._dom.ySelect=a.create("select",{class:"axis__select",name:"y"}),h.appendChild(this._dom.ySelect);for(var m=0,_=["y","z"];m<_.length;m++){var p=_[m],f=a.create("option",{value:p});f.textContent=p,f.selected=p===n[1],this._dom.ySelect.appendChild(f)}this._dom.container.appendChild(this._dom.control),a.listen(this._dom.xSelect,{change:this._handlers.changeX}),a.listen(this._dom.ySelect,{change:this._handlers.changeY})}return g(e,[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.control)}}]),e}(),k=function(){function e(t,n){var i=this;v(this,e),this._layer=0,this._dom={container:t,control:null,stack:null},this._handlers={select:function(e){if(e.target!==i._dom.stack){var t=p(i._dom.stack.children);i.select(t.indexOf(e.target))}}},this._dom.control=a.create("div",{class:"parallax-editor__control layers"}),this._dom.stack=a.create("div",{class:"layers__stack"}),this._dom.control.appendChild(this._dom.stack);for(var o=0;o<n;o+=1){var r=a.create("div",{class:"layers__layer"});r.textContent=o+1,this._dom.stack.appendChild(r)}this._dom.container.appendChild(this._dom.control),a.listen(this._dom.stack,{click:this._handlers.select})}return g(e,[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.control)}},{key:"select",value:function(e){if(!(e<0||e>=this._dom.stack.children.length)){this._layer=e;for(var t=0,n=Array.from(this._dom.stack.children);t<n.length;t++){delete n[t].dataset.active}this._dom.stack.children[e].dataset.active="",a.dispatch(this._dom.control,"select",{layer:e})}}},{key:"layer",get:function(){return this._layer}}]),e}(),x=function(){function e(t,n){var i=this;v(this,e),this._active=!1,this._dom={container:t,control:null,switch:null},this._handlers={toggle:function(e){i._active=!i._active,i._active?i._dom.switch.dataset.active="":delete i._dom.switch.dataset.active,a.dispatch(i._dom.control,"toggled",{active:i._active})}},this._dom.control=a.create("div",{class:"parallax-editor__control position-mode"}),this._dom.switch=a.create("div",{class:"position-mode__switch"}),this._dom.control.appendChild(this._dom.switch),this._dom.container.appendChild(this._dom.control),a.listen(this._dom.switch,{click:this._handlers.toggle})}return g(e,[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.control)}},{key:"active",get:function(){return this._active}}]),e}(),C=function(){function e(t){var n=this;v(this,e),this._tracking=[0,0],this._dom={container:t,control:null,xInput:null,yInput:null},this._handlers={change:function(e){var t=parseFloat(n._dom.xInput.value),i=parseFloat(n._dom.yInput.value);isNaN(t)||isNaN(i)||(n._size=[t,i],a.dispatch(n._dom.control,"changed",{tracking:[t,i]}))}},this._dom.control=a.create("div",{class:"parallax-editor__control tracking"});var i=a.create("div",{class:"tracking__distance"});this._dom.control.appendChild(i);var o=a.create("label",{class:"tracking__label"});o.textContent="x",i.appendChild(o),this._dom.xInput=a.create("input",{class:"tracking__input",type:"text",name:"width"}),o.appendChild(this._dom.xInput);var r=a.create("div",{class:"tracking__distance"});this._dom.control.appendChild(r);var s=a.create("label",{class:"tracking__label"});s.textContent="y",r.appendChild(s),this._dom.yInput=a.create("input",{class:"tracking__input",type:"text",name:"width"}),s.appendChild(this._dom.yInput),this._dom.container.appendChild(this._dom.control),a.listen(this._dom.xInput,{input:this._handlers.change}),a.listen(this._dom.yInput,{input:this._handlers.change})}return g(e,[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.control)}},{key:"tracking",get:function(){return this._tracking},set:function(e){var t=f(e,2);this._dom.xInput.value=t[0],this._dom.yInput.value=t[1],this._tracking=e.slice()}}]),e}(),S=function(){function e(t,n){var i=this;v(this,e),this._size=n,this._dom={container:t,control:null,heightInput:null,widthInput:null},this._handlers={change:function(e){var t=parseInt(i._dom.widthInput.value,10),n=parseInt(i._dom.heightInput.value,10);!isNaN(t)&&!isNaN(n)&&t>0&&n>0&&(i._size=[t,n],a.dispatch(i._dom.control,"changed",{size:[t,n]}))}},this._dom.control=a.create("div",{class:"parallax-editor__control view-size"});var o=a.create("div",{class:"view-size__dimension"});this._dom.control.appendChild(o);var r=a.create("label",{class:"view-size__label"});r.textContent="w",o.appendChild(r),this._dom.widthInput=a.create("input",{class:"view-size__input",type:"text",name:"width",value:n[0]}),r.appendChild(this._dom.widthInput);var s=a.create("div",{class:"view-size__dimension"});this._dom.control.appendChild(s);var l=a.create("label",{class:"view-size__label"});l.textContent="h",s.appendChild(l),this._dom.heightInput=a.create("input",{class:"view-size__input",type:"text",name:"height",value:n[1]}),l.appendChild(this._dom.heightInput),this._dom.container.appendChild(this._dom.control),a.listen(this._dom.widthInput,{input:this._handlers.change}),a.listen(this._dom.heightInput,{input:this._handlers.change})}return g(e,[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.control)}},{key:"size",get:function(){return this._size},set:function(e){var t=f(e,2);this._dom.widthInput.value=t[0],this._dom.widthInput.value=t[1],this._size=e.slice()}}]),e}(),T=function(){function e(t,n){var i=this;v(this,e),this._parallax=n,this._dom={container:t,editor:null,layers:null},this._handlers={axes:function(e){i._parallax.axes=e.axes},mode:function(e){e.active?(i._parallax.setMode("position"),i._parallax.setActiveLayer(i._layers.layer)):(i._parallax.setMode("pan"),i._parallax.blurActiveLayers())},resize:function(e){i._parallax.viewportSize=e.size},selectLayer:function(e){i._tracking.tracking=i._parallax.getLayerMov(e.layer),i._positionMode.active&&i._parallax.setActiveLayer(e.layer)},tracking:function(e){i._parallax.setLayerMov(i._layers.layer,e.tracking)}},this._dom.editor=a.create("div",{class:"big-screen__parallax-editor | parallax-editor"}),this._layers=new k(this._dom.editor,this._parallax.layers.length),a.listen(this._layers._dom.control,{select:this._handlers.selectLayer}),this._positionMode=new x(this._dom.editor),a.listen(this._positionMode._dom.control,{toggled:this._handlers.mode}),this._tracking=new C(this._dom.editor),a.listen(this._tracking._dom.control,{changed:this._handlers.tracking}),this._viewSize=new S(this._dom.editor,n.viewportSize),a.listen(this._viewSize._dom.control,{changed:this._handlers.resize}),this._axis=new b(this._dom.editor,this._parallax.axes),a.listen(this._axis._dom.control,{changed:this._handlers.axes}),this._dom.container.appendChild(this._dom.editor),this._layers.select(0)}return g(e,[{key:"destroy",value:function(){this._layers.destroy(),this._positionMode.destroy(),this._tracking.destroy(),this._viewSize.destroy(),this._axis.destroy(),this._dom.container.removeChild(this._dom.editor)}}]),e}();function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var j=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._image=n,this._dom={container:t,shot:null},this._handlers={fit:function(){Object(m.a)(i._dom.container,i._dom.shot,i.image.core_meta.image.size)}};this.image.core_meta.image.size;this._dom.shot=a.create("div",{class:"big-screen__image",style:"background-image: url('".concat(this.image.url,"');")}),this._dom.container.appendChild(this._dom.shot);var o=a.create("a",{class:"big-screen__open-link",href:this._image.url,target:"_blank",title:"Open image in a new window"});this._dom.shot.appendChild(o),a.listen(window,{resize:this._handlers.fit}),setTimeout((function(){i._handlers.fit()}),0)}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.shot),a.ignore(window,{resize:this._handlers.fit}),this._dom.container.style.maxWidth="auto"}},{key:"image",get:function(){return".gif"===this._image.ext?this._image:this._image.variations.full}}])&&O(t.prototype,n),i&&O(t,i),e}(),I=n(21),P=n(23);function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function L(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var A=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._layers=n,this._imageSize=n[0].core_meta.image.size,this._dom={container:t,twentyTwenty:null},this._handlers={fit:function(){Object(m.a)(i._dom.container,i._dom.twentyTwenty,i._imageSize)}},this._dom.twentyTwenty=a.create("div",{class:"big-screen__twenty-twenty | big-screen-twenty-twenty","data-twenty-twenty":""});var o=!0,r=!1,s=void 0;try{for(var l,d=this._layers.entries()[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var c=E(l.value,2),u=c[0],h=c[1],_=100-u*(100/this._layers.length),p=a.create("div",{class:"\n                        big-screen-twenty-twenty__layer\n                        big-screen-twenty-twenty__layer--".concat(u,"\n                    "),style:"\n                        background-image: url('".concat(h.url,"');\n                        width: ").concat(_,"%;\n                    "),"data-twenty-twenty-layer":""});this._dom.twentyTwenty.appendChild(p)}}catch(e){r=!0,s=e}finally{try{o||null==d.return||d.return()}finally{if(r)throw s}}this._twentyTwenty=new P.a(this._dom.twentyTwenty),this._twentyTwenty.init(),this._dom.container.appendChild(this._dom.twentyTwenty),a.listen(window,{resize:this._handlers.fit}),setTimeout((function(){i._handlers.fit()}),0)}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){this._twentyTwenty.destroy(),a.ignore(window,{resize:this._handlers.fit}),this._dom.container.removeChild(this._dom.twentyTwenty)}}])&&L(t.prototype,n),i&&L(t,i),e}(),F=n(13),M=n(24);function N(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",(function(){return z})),n.d(t,"b",(function(){return D}));var z=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._view=null,this._metadata=null,this._vendor=null,this._dom={close:null,footer:null,screen:null,view:null},this._handlers={close:function(e){"keydown"===e.type&&"Escape"!==e.key||t.hide()},nextSlide:function(){"ArrowRight"===event.key&&t._view.slideshow&&t._view.slideshow.next()},prevSlide:function(){"ArrowLeft"===event.key&&t._view.slideshow&&t._view.slideshow.prev()},scroll:function(){a.dispatch(window,"checkseen")},transitioned:function(){delete t.screen.dataset.transitioning,t.visible?a.dispatch(t.screen,"shown"):a.dispatch(t.screen,"hidden")}}}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){Object(m.b)(),a.ignore(document,{keydown:this._handlers.nextSlide}),a.ignore(document,{keydown:this._handlers.prevSlide}),a.ignore(document,{keydown:this._handlers.close}),a.ignore(window,{popstate:this._handlers.close}),this.screen&&(this._view.destroy(),this._view=null,this._editor&&(this._editor.destroy(),this._editor=null),this._metadata&&(this._metadata.destroy(),this._metadata=null),this._vendor&&(this._vendor.destroy(),this._vendor=null),document.body.removeChild(this.screen),this._dom={close:null,footer:null,screen:null,view:null}),delete document.body.dataset.bigScreenInitialized}},{key:"hide",value:function(){"transitioning"in this.screen.dataset||(Object(i.a)(),this.screen.dataset.transitioning="",delete this.screen.dataset.visible)}},{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];document.body.dataset.bigScreenInitialized="";var i=e.type;"20:20"===e.type&&(i="2020"),this._dom.screen=a.create("div",{class:"big-screen big-screen--".concat(i),"data-on-seen":"full_view","data-on-type":"creation","data-on-id":e._id,"data-on-always":""});var r=a.create("div",{class:"big-screen__logo"});switch(this.screen.appendChild(r),this._dom.close=a.create("div",{class:"big-screen__close"}),this.screen.appendChild(this._dom.close),this._dom.view=a.create("div",{class:"big-screen__view"}),this.screen.appendChild(this._dom.view),this._dom.footer=a.create("div",{class:"big-screen__footer"}),this.screen.appendChild(this._dom.footer),e.type){case"20:20":this._view=new A(this._dom.view,e.layers);break;case"parallax":this._view=new w(this._dom.view,e.layers,e.parallax_axes,e.parallax_viewer_size),n&&(this._editor=new T(this._dom.footer,this._view));break;case"shot":this._view=new j(this._dom.view,e.images[0]);break;case"slideshow":this._view=new I.a(this._dom.view,e.images,null,!0),this._view._dom.slideshow.classList.add("big-screen__slideshow"),this._view.slideshow.showSlide(t),a.listen(document,{keydown:this._handlers.nextSlide}),a.listen(document,{keydown:this._handlers.prevSlide})}n||(this._metadata=new h(this._dom.footer,e),this._vendor=new M.a(this._dom.footer,"textcard",e)),document.body.appendChild(this.screen),window.getComputedStyle(this.screen).opacity,a.listen(this._dom.close,{click:this._handlers.close}),a.listen(this._dom.screen,{transitionend:this._handlers.transitioned}),a.listen(this._dom.screen,{scroll:this._handlers.scroll}),a.listen(document,{keydown:this._handlers.close}),a.listen(window,{popstate:this._handlers.close}),Object(m.c)(),n||(window.gStats.populate(this.screen),Object(o.a)("member_info")&&(window.gLikeBehaviour.apply(),window.gCollectBehaviour.apply()),F.a.order())}},{key:"show",value:function(){"transitioning"in this.screen.dataset||(Object(i.a)(),this.screen.dataset.transitioning="",this.screen.dataset.visible="")}},{key:"screen",get:function(){return this._dom.screen}},{key:"visible",get:function(){return"visible"in this._dom.screen.dataset}}])&&N(t.prototype,n),r&&N(t,r),e}();function D(){var e=new z;function t(){e.destroy()}a.listen(document,{click:function(n){var i=a.closest(n.target,"[data-project-on-big-screen]");if(i){n.preventDefault(),e.screen&&(a.ignore(e.screen,{hidden:t}),e.destroy());var o=0,r=a.closest(i,"[data-slideshow]");r&&(o=r._slideshow.slide);var s=JSON.parse(i.dataset.projectOnBigScreen);e.init(s,o),e.show(),a.listen(e.screen,{hidden:t})}}})}},2:function(e,t,n){"use strict";function a(e,t,n){var a=e.getBoundingClientRect(),i=a.width,o=a.height,r=i,s=o,l=n[0]/n[1];l>i/o?o=(i=Math.min(i,n[0]))/l:i=(o=Math.min(o,n[1]))*l;var d=(r-i)/2,c=(s-o)/2;t.style.width="".concat(i,"px"),t.style.height="".concat(o,"px"),t.style.top="".concat(c,"px"),t.style.left="".concat(d,"px")}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r}));var i=0;function o(){0===(i=Math.max(0,i-1))&&delete document.body.dataset.noScroll}function r(){i+=1,document.body.dataset.noScroll=""}},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),i=n(8),o=n(16);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var d=function(){function e(t,n,s){var l=this;r(this,e),this._creationId=s,this._dom={add:a.one("[data-collection-picker-add]",n),picker:n,select:a.one("[data-collection-picker-select]",n),toggle:t},this._handlers={addTo:function(){if(l._dom.select.value){var e=l._dom.select.value,t=l._dom.select.selectedOptions[0].text,n=new FormData;n.append("collection",e),n.append("creation",l._creationId),fetch("/x/add-to-collection",{method:"POST",credentials:"same-origin",body:n}).then((function(e){return e.json()})).then((function(e){"success"===e.status&&(l.open=!1,Object(i.b)("message","Creation added to the ".concat(t," collection")),l._dom.toggle.dataset.collected="",window.gCollectBehaviour._collected.add(l._creationId),o.a.scrollToPosition([0,0],.25))}))}},close:function(e){l._dom.picker.contains(e.target)||l._dom.toggle.contains(e.target)||(l.open=!1)},toggle:function(e){e.preventDefault(),"populating"in l._dom.picker.dataset||(l.open?l.open=!1:(l._dom.picker.dataset.populating="",l.open=!0,fetch("/x/collections",{credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){delete l._dom.picker.dataset.populating;var t=e.payload.collections;if(0!==(t=t.filter((function(e){return-1===e.creations.indexOf(l._creationId)}))).length){l._dom.select.innerHTML="";var n=a.create("option",{value:""});n.text="Select...",l._dom.select.add(n);var i=!0,o=!1,r=void 0;try{for(var s,d=t[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var c=s.value;(n=a.create("option")).value=c._id,n.text=c.name,l._dom.select.add(n)}}catch(e){o=!0,r=e}finally{try{i||null==d.return||d.return()}finally{if(o)throw r}}}else l._dom.picker.dataset.empty=""}))))}}}return l(e,[{key:"destroy",value:function(){this._dom.picker&&(a.ignore(document,{click:this._handlers.close}),a.ignore(this._dom.toggle,{click:this._handlers.toggle}),a.ignore(this._dom.add,{click:this._handlers.addTo}),this._dom={},this._creationId=null)}},{key:"init",value:function(){this._dom.picker._collectionPicker=this,a.listen(document,{click:this._handlers.close}),a.listen(this._dom.toggle,{click:this._handlers.toggle}),a.listen(this._dom.add,{click:this._handlers.addTo})}},{key:"open",get:function(){return"open"in this._dom.picker.dataset},set:function(e){e!==this.open&&(e?this._dom.picker.dataset.open="":delete this._dom.picker.dataset.open)}}]),e}(),c=function(){function e(){r(this,e),this._fetched=!1,this._collected=new Set}return l(e,[{key:"apply",value:function(){var e=this,t=function(){var t=!0,n=!1,i=void 0;try{for(var o,r=a.many("[data-collect]")[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value;e.collected(s.dataset.collect)&&(s.dataset.collected="");var l=a.one("[data-collection-picker]",s.parentNode);if(l)l._collectionPicker&&l._collectionPicker.destroy(),new d(s,l,s.dataset.collect).init()}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}};this._fetched?t():this._fetchCollected().then((function(){t()}))}},{key:"collected",value:function(e){return this._collected.has(e)}},{key:"_fetchCollected",value:function(){var e=this;return fetch("/x/collected",{credentials:"same-origin"}).then((function(e){return e.json()})).then((function(t){e._fetched=!0,e._collected=new Set(t.payload.collected)}))}}]),e}()},208:function(e,t,n){"use strict";n.r(t);var a=n(0),i={_default:null,_handler:null};function o(e){var t=window.history[e];window.history[e]=function(e,n,a){void 0===a?t.apply(window.history,[e,n]):t.apply(window.history,[e,n,a])}}function r(e){window.history.state&&window.history.state.__reload__&&window.location.reload()}function s(){i._handler=i._default||r}function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(i._default=e),i._handler=e}var d=n(3);function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=a.one('[data-ref="cookie-consent"]');this._dom={accept:a.one('[data-is="accept"]',n),container:n,decline:a.one('[data-is="decline"]',n)},this._handlers={accept:function(t){return t.preventDefault(),e._setConsent("accepted"),window.location.reload(),!1},decline:function(n){n.preventDefault(),e._setConsent("declined"),t._dom.container.remove()}},this._consent=null}var t,n,i;return t=e,i=[{key:"_setConsent",value:function(e){var t=new Date;t.setTime(t.getTime()+31536e6),t=t.toUTCString(),document.cookie="cookie_consent=".concat(e,";path=/;SameSite=Lax")+";Expires=".concat(t)}}],(n=[{key:"init",value:function(){a.listen(this._dom.accept,{click:this._handlers.accept}),a.listen(this._dom.decline,{click:this._handlers.decline})}}])&&c(t.prototype,n),i&&c(t,i),e}();var h=n(171),m=n(41),_=n(6),p=n(5);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var y=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,e),this._options={},a.config(this._options,{min:0,max:100},i,t,"data-slider--"),this._dragging=!1,this._dom={board:null,field:null,level:null,knob:null,slider:null},this._dom.slider=t,this._handlers={drag:function(e){n._dragging&&(e.preventDefault(),n.level=n._screenToLevel(Object(p.a)(e)[0]))},endDrag:function(e){n._dragging&&("mouseout"!==e.type||!e.relatedTarget&&null===e.toElement)&&(e.preventDefault(),n._dragging=!1,delete n.slider.dataset.sliderDragging)},startDrag:function(e){"mousedown"===e.type&&0!==e.button||(e.preventDefault(),n.level=n._screenToLevel(Object(p.a)(e)[0]),n._dragging=!0,n.slider.dataset.sliderDragging="")}}}var t,n,i;return t=e,(n=[{key:"init",value:function(){this._dom.field=a.one(this.slider.dataset.slider),this._dom.level=a.one("[data-slider-level]",this.slider),this._dom.board=a.one("[data-slider-board]",this.slider),this._dom.knob=a.one("[data-slider-knob]",this.slider),a.listen(this._dom.board,{"mousedown touchstart":this._handlers.startDrag}),a.listen(document,{"mousemove touchmove":this._handlers.drag,"mouseout mouseup touchend":this._handlers.endDrag}),this.level=this.level}},{key:"_screenToLevel",value:function(e){var t=this._dom.board.getBoundingClientRect();return(e-t.left)/t.width*(this._options.max-this._options.min)}},{key:"slider",get:function(){return this._dom.slider}},{key:"level",get:function(){return parseInt(this._dom.field.value,10)||0},set:function(e){var t=parseInt(e,10);t=Math.max(this._options.min,Math.min(this._options.max,t)),this._dom.field.value=t,this._dom.level.textContent=t;var n=this._options.max-this._options.min,i=(t-this._options.min)/n*100;this._dom.knob.style.left="".concat(i,"%"),a.dispatch(this._dom.field,"change")}}])&&v(t.prototype,n),i&&v(t,i),e}();function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e&&(e=a.many(".field input, .field select, .field textarea"));var t=!0,n=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value;a.listen(s,{blur:function(e){delete a.closest(e.target,".field").dataset.focus},empty:function(e){delete a.closest(e.target,".field").dataset.filled},filled:function(e){a.closest(e.target,".field").dataset.filled=""},focus:function(e){a.closest(e.target,".field").dataset.focus=""},picked:function(e){a.closest(e.target,".field").dataset.filled=""}})}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}Object(m.removeFilled)(".field input, .field select, .field textarea"),Object(m.addFilled)(".field input, .field select, .field textarea")}function w(){g(),function(){_.tokenizer.Tokenizer.behaviours.store.jsonObjects=function(e){a.one(e._options.hiddenSelector).value=JSON.stringify(e.tokens)};var e=!0,t=!1,n=void 0;try{for(var i,o=a.many("[data-mh-typeahead]")[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value;new _.typeahead.Typeahead(r,{minChars:2}).init()}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}var s=!0,l=!1,d=void 0;try{for(var c,u=a.many("[data-mh-tokenizer]")[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var h=c.value,m=new _.tokenizer.Tokenizer(h,{store:"json"}),p=h.getAttribute("data-mh-tokenizer--hidden-selector"),f=a.one(p),v=JSON.parse(f.value||"[]");v=v.map((function(e){return"string"==typeof e?{label:e,value:e}:e})),m.init(v)}}catch(e){l=!0,d=e}finally{try{s||null==u.return||u.return()}finally{if(l)throw d}}_.typeahead.Typeahead.behaviours.input.tag=function(e,t){null===t?e.input.value="":(e.input.value=t.value,t.value.indexOf(" ")>-1&&(e.input.value='"'.concat(t.value,'"'))),a.dispatch(e.input,"change")},_.typeahead.Typeahead.behaviours.element.member=function(e,t){var n=a.create("div",{class:[e.constructor.css.suggestion,"member-suggestion"].join(" ")}),i=a.create("div",{class:"member-suggestion__picture"});t.picture&&(i.style.backgroundImage="url('".concat(t.picture,"')")),n.appendChild(i);var o=a.create("div",{class:"member-suggestion__name"});o.textContent=t.name,n.appendChild(o);var r=a.create("div",{class:"member-suggestion__username"});return r.textContent="@".concat(t.username),n.appendChild(r),n},_.typeahead.Typeahead.behaviours.input.comment=function(e,t){if(null!==t){var n=e.input.selectionStart,a=e.input.value.slice(n),i=e.input.value.slice(0,n);i=e.input.value.slice(0,i.lastIndexOf("@")+1),e.input.value="".concat(i).concat(t.username).concat(a),e.input.selectionEnd=i.length+t.username.length}},_.typeahead.Typeahead.behaviours.query.at=function(e){var t=e.input.selectionStart,n=e.input.value.slice(0,t),a=n.lastIndexOf("@");return-1===a?"":-1===n.slice(a+1,t).lastIndexOf(" ")||e.isOpen?n.slice(a+1).trim():""},_.typeahead.Typeahead.behaviours.input.comment=function(e,t){if(null!==t){var n=e.input.selectionStart,a=e.input.value.slice(n),i=e.input.value.slice(0,n);i=e.input.value.slice(0,i.lastIndexOf("@")+1),e.input.value="".concat(i).concat(t.username).concat(a),e.input.selectionEnd=i.length+t.username.length}}}(),function(){var e=!0,t=!1,n=void 0;try{for(var i,o=a.many("[data-mh-character-count]")[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value;new h.a(r,{separator:" of "}).init()}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}(),function(){var e=!0,t=!1,n=void 0;try{for(var i,o=a.many("[data-slider]")[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value;new y(r).init()}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}(),function(){function e(e,t){return function(){e.dataset.usernameChecking="",fetch("/x/check-username?username=".concat(t)).then((function(e){return e.json()})).then((function(n){if(t===e.value.trim())if(delete e.dataset.usernameChecking,"success"===n.status)e.dataset.usernameValid="";else{var i=a.closest(e,"[data-field]");i.classList.add("field--has-errors");var o=a.create("span",{class:"field__errors","data-field-errors":""});o.textContent=n.reason,i.appendChild(o)}}))}}var t=!0,n=!1,i=void 0;try{for(var o,r=a.many("[data-validate-username]")[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value;a.listen(s,{input:function(t){var n=t.currentTarget;n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout((function(){var t=a.closest(n,"[data-field]"),i=a.one("[data-field-errors]",t),o=n.value.trim();delete n.dataset.usernameChecking,delete n.dataset.usernameValid,t.classList.remove("field--has-errors"),i&&i.remove(),o&&e(n,o)()}),500)}})}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}}()}function b(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var k=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dom={close:null,imagePlaceholder:null,images:null,nextControl:null,overlay:null,prevControl:null},this._handlers={open:function(e){t.open(e.currentTarget)},close:function(){t.close()},goToNextImage:function(){t.goToImage(t.nextImageIndex)},goToPrevImage:function(){t.goToImage(t.prevImageIndex)},loadImage:function(e){t._dom.imagePlaceholder.style.backgroundImage="url('".concat(e.currentTarget.src,"')"),t.loading=!1,clearTimeout(t._loadingTimeout)},nav:function(e){switch(e.key){case"Escape":t.close();break;case"ArrowLeft":t.goToImage(t.prevImageIndex);break;case"ArrowRight":t.goToImage(t.nextImageIndex)}},view:function(e){var n=e.target;n.hasAttribute("data-full-view")&&t._dom.images.indexOf(n)>-1&&t.open(n)}},this._imageIndex=-1,this._open=!1,this._loading=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(e){this._dom.images=e,this._dom.overlay=a.create("div",{class:"turorial__full-view | full-view","data-full-view-overlay":""}),this._dom.close=a.create("div",{class:"full-view__close","data-full-view-close":""}),this._dom.overlay.appendChild(this._dom.close),this._dom.imagePlaceholder=a.create("div",{class:"full-view__image","data-full-view-image":""}),this._dom.overlay.appendChild(this._dom.imagePlaceholder);var t=a.create("p",{class:"full-view__image-caption","data-full-view-caption":""});this._dom.overlay.appendChild(t),document.body.append(this._dom.overlay),a.listen(document.body,{click:this._handlers.view}),a.listen(this._dom.close,{click:this._handlers.close}),a.listen(document.body,{keydown:this._handlers.nav}),e.length>1&&(this._dom.nextControl=a.create("div",{class:"full-view__arrow  full-view__arrow--next","data-full-view-next":""}),this._dom.overlay.appendChild(this._dom.nextControl),a.listen(this._dom.nextControl,{click:this._handlers.goToNextImage}),this._dom.prevControl=a.create("div",{class:"full-view__arrow  full-view__arrow--previous","data-full-view-prev":""}),this._dom.overlay.appendChild(this._dom.prevControl),a.listen(this._dom.prevControl,{click:this._handlers.goToPrevImage}))}},{key:"destroy",value:function(){a.ignore(document.body,{click:this._handlers.view}),a.ignore(document.body,{keydown:this._handlers.nav}),this._dom.overlay&&(this._dom.overlay.remove(),this._dom={close:null,imagePlaceholder:null,images:null,nextControl:null,overlay:null,prevControl:null})}},{key:"open",value:function(e){this._open||(this._imageIndex=this._dom.images.indexOf(e),this._loadImg(e.dataset.fullView),this._dom.overlay.dataset.fullViewOverlay="open",this._open=!0)}},{key:"close",value:function(){this._open&&(this._imageIndex=-1,this._dom.overlay.dataset.fullViewOverlay="",this._open=!1)}},{key:"goToImage",value:function(e){(e<0||e>this._dom.images.length-1)&&(e=0),this._loadImg(this._dom.images[e].dataset.fullView),this._imageIndex=e}},{key:"_loadImg",value:function(e){var t=this;this.loading=!1,clearTimeout(this._loadingTimeout),this._loadingTimeout=setTimeout((function(){t.loading=!0}),500),this._loaderElm&&a.ignore(this._loaderElm,{load:this._handlers.loadImage}),this._loaderElm=a.create("img",{src:e}),a.listen(this._loaderElm,{load:this._handlers.loadImage})}},{key:"loading",get:function(){return this._loading},set:function(e){e?(this._loading=!0,this._dom.overlay.dataset.loading=""):(this._loading=!1,delete this._dom.overlay.dataset.loading)}},{key:"nextImageIndex",get:function(){var e=this._imageIndex+1;return e>this._dom.images.length-1?0:e}},{key:"prevImageIndex",get:function(){var e=this._imageIndex-1;return e<0?this._dom.images.length-1:e}}])&&b(t.prototype,n),i&&b(t,i),e}();function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dom={image:t,wrapper:null}}var t,n,i;return t=e,i=[{key:"removeInfoLinks",value:function(){a.many("[data-info]").forEach((function(e){var t=e._imageInfo;t&&t.destroy()}))}},{key:"addInfoLinks",value:function(){a.many("[data-info]").forEach((function(t){new e(t).init()}))}}],(n=[{key:"init",value:function(){var e=this._dom.image,t=a.create("a",{class:"image-more-info__link",href:e.dataset.info,target:"_blank"}),n=null;"IMG"===e.nodeName?(n=a.create("div",{class:"image-more-info ".concat(e.className.split(" "))}),e.height&&(n.style.height="".concat(e.height,"px")),e.width&&(n.style.width="".concat(e.width,"px")),n.appendChild(t),e.parentNode.insertBefore(n,e),n.appendChild(e),e=a.one("img",n)):((n=e).classList.add("image-more-info"),n.appendChild(t)),this._dom.wrapper=n,e._imageInfo=this}},{key:"destroy",value:function(){this._dom.wrapper.parentNode.replaceChild(this._dom.image,this._dom.wrapper)}}])&&x(t.prototype,n),i&&x(t,i),e}();var S=n(16),T=n(4);function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var I=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;O(this,e),this._sectionBuffer=i,this._dom={breadcrumb:a.one("[data-breadcrumb]"),container:t,header:a.one("[data-page-header]"),links:null,linksContainer:a.one("[data-jump-links-navigation]",t),subNav:a.one("[data-sub-nav]")},this._handlers={jumpTo:function(e){n.jumpTo(n.targetElm)},updateNav:function(){n._updateNav()},updateSection:function(){n._updateSection()}}}var t,n,i;return t=e,i=[{key:"isHeaderFixed",value:function(){return window.innerWidth<T.a.breakpoints.large}},{key:"getHeaderHeight",value:function(){return window.innerWidth<T.a.breakpoints.large?156:52}}],(n=[{key:"destroy",value:function(){this._dom.links&&(this._dom.links.remove(),delete document.body.dataset.hasJumpLinks),a.ignore(window,{scroll:this._handlers.updateNav}),a.ignore(window,{"resize scroll":this._handlers.updateSection})}},{key:"init",value:function(e){this._dom.links=a.create("select",{class:"jump-links__input | field__input"});var t=!0,n=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value,l=a.create("option",{value:s.id});l.textContent=" ".concat(s.textContent.trim()),this._dom.links.add(l)}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}this._dom.linksContainer.appendChild(this._dom.links),e.length>0&&(document.body.dataset.hasJumpLinks=""),a.listen(this._dom.links,{change:this._handlers.jumpTo}),a.listen(window,{scroll:this._handlers.updateNav}),a.listen(window,{"resize scroll":this._handlers.updateSection})}},{key:"jumpTo",value:function(e){var t=this.constructor,n=this._sectionBuffer+this._dom.container.clientHeight;"JumpLinksFixed"in document.body.dataset||(n+=this._dom.container.clientHeight),t.isHeaderFixed()&&(n+=this._dom.breadcrumb.clientHeight,n+=this._dom.header.clientHeight),S.a.scrollToElement(e,[0,-n],.5,(function(){history.replaceState(null,null,"#".concat(e.id))}))}},{key:"_updateNav",value:function(){this._dom.subNav.getBoundingClientRect().bottom>=0?(this._dom.container.classList.remove("jump-links--fixed"),delete document.body.dataset.JumpLinksFixed):(this._dom.container.classList.add("jump-links--fixed"),document.body.dataset.JumpLinksFixed="")}},{key:"_updateSection",value:function(){var e=this.constructor,t=null,n=document.documentElement.scrollHeight-window.innerHeight;if(document.documentElement.scrollTop===n){var i=this._dom.links.options;t=a.one("#".concat(i[i.length-1].value))}else for(var o=0,r=Array.from(this._dom.links.options);o<r.length;o++){var s=r[o],l=a.one("#".concat(s.value));if(l.getBoundingClientRect().top>e.getHeaderHeight()+this._sectionBuffer)break;t=l}t?(this._dom.links.value=t.id,history.replaceState(null,null,"#".concat(t.id))):(this._dom.links.selectedIndex=0,history.replaceState(null,null,""))}},{key:"selectedLink",get:function(){return this._dom.links.value}},{key:"targetElm",get:function(){return a.one("[id='".concat(this.selectedLink,"']"))}}])&&j(t.prototype,n),i&&j(t,i),e}();var P=n(10);function E(){if(a.one("[data-search-filter]")){var e=a.one("[data-search-filter-proxy]"),t=new FormData(a.one("[data-search-filter]")),n=!0,i=!1,o=void 0;try{for(var r,s=t.keys()[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value;if("q"!==l&&"colour_weight"!==l&&t.get(l))return void(e.dataset.searchFilterProxyPopulated="")}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}delete e.dataset.searchFilterProxyPopulated}}function L(){var e=a.one("[data-sub-nav]");"searchFilterOpen"in e.dataset&&(delete e.dataset.searchFilterOpen,E())}function A(){var e=a.one("[data-sub-nav]");"searchFilterOpen"in e.dataset||(e.dataset.searchFilterOpen="",a.one("[data-search-filter-q]").focus())}function F(){var e=document.body;if("navOpen"in e.dataset)delete e.dataset.navOpen;else{e.dataset.navOpen="";var t=a.one("[data-flash]");t&&t.remove()}}function M(){"subNavOpen"in document.body.dataset?delete document.body.dataset.subNavOpen:(E(),document.body.dataset.subNavOpen="")}function N(){a.listen(a.one("[data-nav-handle]"),{click:F});var e=document.body;if(e.dataset.activeNav){var t=e.dataset.activeNav;a.one('[data-nav-item="'.concat(t,'"]')).dataset.activeNav=""}if(e.dataset.activeSubNav){var n=e.dataset.activeSubNav,i=a.one('[data-sub-nav-item="'.concat(n,'"]'));i&&(i.dataset.activeSubNav="")}var o=a.one("[data-sub-nav-handle]");o&&a.listen(o,{click:M}),function(){var e=document.body,t=a.one("[data-breadcrumb-list]");if(t&&!(t.children.length>0)){var n=e.dataset.activeNav;if(n){var i=a.one('[data-nav-item="'.concat(n,'"]')),o=a.create("li",{class:"breadcrumb__item"});if(e.dataset.activeSubNav){var r=a.create("a",{class:"breadcrumb__link",href:i.href});r.textContent=i.dataset.breadcrumbLabel||i.textContent,o.appendChild(r)}else o.textContent=i.dataset.breadcrumbLabel||i.textContent;t.append(o)}var s=e.dataset.activeSubNav;if(s){var l=a.one('[data-sub-nav-item="'.concat(s,'"]'));if(l){var d=a.create("li",{class:"breadcrumb__item"});d.textContent=l.dataset.breadcrumbLabel||l.textContent,t.append(d)}}}}(),function(){var e=Object(d.a)("member_info");if(null!==e){var t=null;try{t=JSON.parse(Object(d.b)(e))}catch(e){return}var n=!0,i=!1,o=void 0;try{for(var r,s=a.many("[data-member-info]")[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){r.value.dataset.signedIn=""}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}if(t.name&&(a.one("[data-nav-member-name]").textContent=Object(P.a)(t.name)),t.username&&(a.one("[data-nav-profile-link]").href="/".concat(t.username)),t.picture){var l=!0,c=!1,u=void 0;try{for(var h,m=a.many("[data-nav-member-picture]")[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){h.value.style="background-image: url(".concat(t.picture,")")}}catch(e){c=!0,u=e}finally{try{l||null==m.return||m.return()}finally{if(c)throw u}}var _=!0,p=!1,f=void 0;try{for(var v,y=a.many("[data-member-info]")[Symbol.iterator]();!(_=(v=y.next()).done);_=!0){v.value.dataset.hasPicture=""}}catch(e){p=!0,f=e}finally{try{_||null==y.return||y.return()}finally{if(p)throw f}}}if(Object(d.a)("unread")){var g=!0,w=!1,b=void 0;try{for(var k,x=a.many("[data-member-info]")[Symbol.iterator]();!(g=(k=x.next()).done);g=!0){k.value.dataset.hasUnread=""}}catch(e){w=!0,b=e}finally{try{g||null==x.return||x.return()}finally{if(w)throw b}}}}}(),function(){function e(e){var t=e.dataset.toggle,n=a.closest(e,t);"toggleShow"in n.dataset&&delete n.dataset.toggleShow}a.listen(document.body,{click:function(t){var n=!0,i=!1,o=void 0;try{for(var r,s=a.many("[data-toggle-close-on-blur]")[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value;l!==t.target&&e(l)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}if("toggle"in t.target.dataset){var d=t.target.dataset.toggle,c=a.closest(t.target,d);"toggleShow"in c.dataset?delete c.dataset.toggleShow:c.dataset.toggleShow=""}}})}(),a.listen(document.body,{click:function(e){"flashClose"in e.target.dataset&&a.closest(e.target,"[data-flash]").remove()}});var r,s,l,c,u,h=a.one("[data-search-filter]");h&&(r=a.one("[data-sub-nav-contents]"),a.one("[data-search-filter]"),s=a.one("[data-search-filter-q]"),l=a.create("div",{class:"search | sub-nav__search","data-search-filter-proxy":""}),c=a.create("input",{class:"search__input",placeholder:s.placeholder,type:"search",value:s.value}),u=a.create("button",{class:"search__btn",type:"submit"}),l.appendChild(c),l.appendChild(u),a.listen(c,{focus:A}),a.listen(u,{click:A}),a.listen(s,{input:function(e){c.value=s.value}}),r.insertBefore(l,r.firstChild),a.listen(a.one("[data-search-filter-handle]"),{click:A}),a.listen(a.one("[data-search-filter-close]"),{click:L}),"searchFilterPopulated"in h.dataset&&(window.innerWidth<976?M():A()))}function z(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"order",value:function(){var t=[],n=[],a=e._getEmptySlotElms();if(a.length>0){var i=!0,o=!1,r=void 0;try{for(var s,l=a[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var d=s.value,c=e._buildSpec(d);c&&(t.push(d),n.push(c))}}catch(e){o=!0,r=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw r}}var u=JSON.stringify(n),h=e._poster(t),m=null;window.URL&&(m=new URL(window.location).searchParams.get("preview_ad")),m?fetch("/x/a?manifest=".concat(u,"&preview_ad=").concat(m)).then((function(e){return e.json()})).then((function(e){h(e.payload.product_contents||[])})):fetch("/x/p?manifest=".concat(u)).then((function(e){return e.json()})).then((function(e){h(e.payload.product_contents||[])}))}}},{key:"_buildSpec",value:function(e){var t={};return"productCard"in e.dataset?(t.type="card",t.tags=e.dataset.productTags.split("|").map(Function.prototype.call,String.prototype.trim),0===t.tags.length&&t.tags.push("books"),t.premium="productPremium"in e.dataset):"productTextcard"in e.dataset?(t.type="textcard",t.tags=e.dataset.productTags.split("|").map(Function.prototype.call,String.prototype.trim),t.premium="productPremium"in e.dataset):"productMidPage"in e.dataset?(t.type="mid-page",t.tags=e.dataset.productTags.split("|").map(Function.prototype.call,String.prototype.trim)):"productTakeover"in e.dataset&&(t.type="takeover",t.path=e.dataset.productPath,t.home="productHome"in e.dataset),e.dataset.productMedium&&(t.medium=e.dataset.productMedium),t}},{key:"_getEmptySlotElms",value:function(){return a.many("[data-product-card]:not([data-product-sold]), [data-product-textcard]:not([data-product-sold]), [data-product-mid-page]:not([data-product-sold]), [data-product-takeover]:not([data-product-sold])")}},{key:"_poster",value:function(t){return function(n){for(var a=0;a<n.length;a+=1){var i=t[a],o=n[a];if(null!==o)switch(o.type){case"Card image":e._postCardImage(i,o);break;case"Card image + text":e._postCardImageText(i,o);break;case"Mid-page":e._postMidPage(i,o);break;case"Page takeover":case"Homepage takeover":e._postTakeover(i,o);break;case"Custom takeover":e._postCustomTakeover(i,o)}}}}},{key:"_postCardImage",value:function(e,t){var n=a.create("img",{src:t.card_image});a.listen(n,{load:function(){var n=t.card_image,i=a.create("a",{class:"product-card__image",href:t.url,rel:"nofollow",style:"background-image: url(".concat(n,")"),target:"_blank","data-on-click":"referral","data-on-id":t.run,"data-on-seen":"impression","data-on-type":"product-post"}),o=a.create("span",{class:"sr-only"});o.innerHTML=t.copy,i.appendChild(o),e.appendChild(i);var r=e.style.width;e.style.width="99.999%",e.style.width=r,e.style.display="block"}})}},{key:"_postCardImageText",value:function(e,t){var n=a.create("img",{src:t.card_image});a.listen(n,{load:function(){var n=e.dataset.productMedium||"unknown",i="shop_advert_".concat(n),o="keyword_".concat(t.keyword),r="?utm_source=3dtotal_site"+"&utm_medium=".concat(i)+"&utm_campaign=".concat(o),s=a.create("a",{class:"product-card__mixed",href:t.url+r,rel:"nofollow",target:"_blank","data-on-click":"referral","data-on-seen":"impression","data-on-type":"product-post"}),l=t.card_image,d=a.create("span",{class:"product-card__text-image",style:"background-image: url(".concat(l,")")}),c=a.create("span",{class:"product-card__text"});c.innerHTML=t.copy,s.appendChild(d),s.appendChild(c),e.appendChild(s),e.style.width="99.999%",e.style.width="100%",e.style.display="block"}})}},{key:"_postMidPage",value:function(e,t){var n=a.one("[data-product-mid-page-bkg]",e),i=a.one("[data-product-mid-page-content]",e);n.style.backgroundColor="#".concat(t.background_colour),t.background_image&&(n.style.backgroundImage="url(".concat(t.background_image,")"));var o=a.create("a",{class:"product-mid-page__link",href:t.url,rel:"nofollow",target:"_blank","data-on-click":"referral","data-on-id":t.run,"data-on-seen":"impression","data-on-type":"product-post"}),r=a.create("span",{class:"product-mid-page__image  product-mid-page__image--1",style:"background-image: url(".concat(t.foreground_image_1,")")}),s=a.create("span",{class:"product-mid-page__image  product-mid-page__image--2",style:"background-image: url(".concat(t.foreground_image_2,")")}),l=a.create("span",{class:"product-mid-page__image  product-mid-page__image--3",style:"background-image: url(".concat(t.foreground_image_3,")")});o.appendChild(r),o.appendChild(s),o.appendChild(l),i.appendChild(o)}},{key:"_postTakeover",value:function(e,t){var n=a.one("[data-product-target]",e)||e;e.style.backgroundColor="#".concat(t.background_colour),t.background_image&&(e.style.backgroundImage="url(".concat(t.background_image,")"));var i=a.create("a",{class:"product-takeover__link",href:t.url,rel:"nofollow",target:"_blank","data-on-click":"referral","data-on-id":t.run,"data-on-seen":"impression","data-on-type":"product-post"}),o=a.create("span",{class:"product-takeover__image  product-takeover__image--1",style:"background-image: url(".concat(t.foreground_image_1,")")}),r=a.create("span",{class:"product-takeover__image  product-takeover__image--2",style:"background-image: url(".concat(t.foreground_image_2,")")}),s=a.create("span",{class:"product-takeover__image  product-takeover__image--3",style:"background-image: url(".concat(t.foreground_image_3,")")});i.appendChild(o),i.appendChild(r),i.appendChild(s),n.appendChild(i)}},{key:"_postCustomTakeover",value:function(e,t){(a.one("[data-product-target]",e)||e).innerHTML=t.custom_template}}],(n=null)&&z(t.prototype,n),i&&z(t,i),e}();var R=n(22);function B(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"populate",value:function(e){var t={},n=!0,i=!1,o=void 0;try{for(var r,s=a.many("[data-stats]",e)[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value,d=l.dataset.stats,c=l.dataset.statsType;t.hasOwnProperty(c)||(t[c]=[]),t[c].push(d)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}0!==Object.keys(t).length&&fetch("/x/s?stats=".concat(JSON.stringify(t))).then((function(e){return e.json()})).then((function(e){var t=e.payload.stats;for(var n in t)if(t.hasOwnProperty(n))for(var i in t[n]){var o=a.many("[data-stat-".concat(i,'="').concat(n,'"]')),r=!0,s=!1,l=void 0;try{for(var d,c=o[Symbol.iterator]();!(r=(d=c.next()).done);r=!0)d.value.textContent=t[n][i]}catch(e){s=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw l}}}}))}}],(n=null)&&B(t.prototype,n),i&&B(t,i),e}();function U(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var J=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buffer=[],this._pending=!1,this._seenTimeout=null,this._handlers={click:function(e){var n=a.closest(e.target,"[data-on-click]");n&&t.send(n.dataset.onClick,n.dataset.onType,n.dataset.onId)},seen:function(){t._seen()},mutate:function(e){var n=!0,a=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){o.value;t._seen()}}catch(e){a=!0,i=e}finally{try{n||null==r.return||r.return()}finally{if(a)throw i}}}}}var t,n,i;return t=e,i=[{key:"_inView",value:function(e){var t=e.getBoundingClientRect(),n=t.top,a=t.right,i=t.bottom,o=(t.left,t.width,t.height),r=i,s=(window.innerWidth,window.innerHeight-n);return Math.max(a,0),r>o&&s>=o/2}}],(n=[{key:"init",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=a.many("[data-on-render]")[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value;this.send(r.dataset.onRender,r.dataset.onType,r.dataset.onId)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}a.listen(document,{click:this._handlers.click}),this._observer=new MutationObserver(this._handlers.mutate),this._observer.observe(document.body,{childList:!0,subtree:!0}),a.listen(window,{"checkseen resize scroll":this._handlers.seen}),this._seen()}},{key:"send",value:function(e,t,n){var a=this;this._buffer.push({action:e,subject_type:t,subject:n}),this._pending||(setTimeout((function(){var e=new FormData;e.append("interactions",JSON.stringify(a._buffer)),fetch("/x/t",{credentials:"same-origin",method:"POST",body:e}),a._buffer=[],a._pending=!1}),100),this._pending=!0)}},{key:"_seen",value:function(){var t=this;this._seenTimeout&&clearTimeout(this._seenTimeout),this._seenTimeout=setTimeout((function(){var n=!0,i=!1,o=void 0;try{for(var r,s=a.many("[data-on-seen]")[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value;(e._inView(l)||"onAlways"in l.dataset)&&(t.send(l.dataset.onSeen,l.dataset.onType,l.dataset.onId),delete l.dataset.onSeen)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}}),50)}}])&&U(t.prototype,n),i&&U(t,i),e}();var V=n(23),W=n(13);var q=n(18);function Y(e){var t=a.closest(e.target,"[data-card-slideshow]");function n(){var e=a.one("[data-card-slide-visible]",t);delete e.dataset.cardSlideVisible,e.nextElementSibling?e.nextElementSibling.dataset.cardSlideVisible="":a.one("[data-card-slide]",t).dataset.cardSlideVisible=""}t&&(t._slideshow=setInterval(n,2500),n())}function G(e){var t=a.closest(e.target,"[data-card-slideshow]");t&&(delete a.one("[data-card-slide-visible]",t).dataset.cardSlideVisible,a.one("[data-card-slide]",t).dataset.cardSlideVisible="",clearInterval(t._slideshow))}function X(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var K=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._colours=JSON.parse(t.dataset.colours),this._dom={colors:null,field:null,filter:null,label:null},this._dom.filter=t,this._handlers={pick:function(e){if(0===e.button){var t=e.target.dataset.colour;t&&(e.preventDefault(),"reset"===t?n.clear():n.pick(t))}},toggle:function(e){0===e.button&&(window.innerWidth<T.a.breakpoints.large||(e.preventDefault(),"colourFilterOpen"in n.filter.dataset?delete n.filter.dataset.colourFilterOpen:n.filter.dataset.colourFilterOpen=""))}}}var t,n,i;return t=e,(n=[{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.field.value="";var t=a.one("[data-picked]",this._dom.colours);t&&(delete t.dataset.picked,e||(this._dom.colours.dataset.cleared="")),this._dom.label.style.backgroundColor=null,delete this._dom.label.dataset.darkColour,delete this._dom.label.dataset.lightColour}},{key:"init",value:function(){this._dom.field=a.one("#colour-filter"),this._dom.label=a.one("[data-colour-filter-label]",this.filter),this.colour,this._dom.colours=a.one("[data-colour-filter-colours]",this.filter);var e=!0,t=!1,n=void 0;try{for(var i,o=this._colours[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value,s=null;s=""===r?a.create("div",{class:"colour-filter__colour colour-filter__colour--reset","data-colour":"reset"}):a.create("div",{class:"colour-filter__colour","data-colour":r,style:"background-color: #".concat(r,";")}),this._dom.colours.appendChild(s)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}a.listen(this._dom.colours,{click:this._handlers.pick}),a.listen(this._dom.label,{click:this._handlers.toggle}),this.colour&&this.pick(this.colour)}},{key:"pick",value:function(e){this.clear(!0);var t=this._colours.indexOf(e);t>-1&&(this.field.value=e,a.one('[data-colour="'.concat(e,'"]'),this._dom.colours).dataset.picked="",delete this._dom.colours.dataset.cleared,this._dom.label.style.backgroundColor="#".concat(e),t%7<2||"d0cd94"===e?this._dom.label.dataset.lightColour="":this._dom.label.dataset.darkColour="")}},{key:"colour",get:function(){return this.field.value}},{key:"field",get:function(){return this._dom.field}},{key:"filter",get:function(){return this._dom.filter}}])&&X(t.prototype,n),i&&X(t,i),e}(),$=n(8),Q=["January","February","March","April","May","June","July","August","September","October","November","December"];function Z(e){return Q[e.getMonth()]}function ee(e){var t=e%10,n=e%100;return 1===t&&11!==n?"st":2===t&&12!==n?"nd":3===t&&13!==n?"rd":"th"}function te(e){var t=Math.floor((function(){var e=new Date;return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())}()-e)/1e3),n=Math.floor(t/31536e3);return n>1?"".concat(n," years ago"):1===n?"a year ago":(n=Math.floor(t/2592e3))>1?"".concat(n," month ago"):1===n?"a month ago":(n=Math.floor(t/86400))>1?"".concat(n," days ago"):1===n?"a day ago":(n=Math.floor(t/3600))>1?"".concat(n," hours ago"):1===n?"an hour ago":(n=Math.floor(t/60))>1?"".concat(n," minutes ago"):1===n?"a minute ago":t>15?"less than a minute ago":"just now"}function ne(e){var t=/^(\d{4})-(\d\d)-(\d\d) (\d\d):(\d\d):(\d\d)$/.exec(e);return t?new Date(t[1],t[2]-1,t[3],t[4],t[5],t[6]):null}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var oe=function(){function e(t,n,i,o,r,s,l){var d=this,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,h=arguments.length>9&&void 0!==arguments[9]&&arguments[9];ae(this,e),this.id=t,this.body=n,this.bodyHTML=i,this.posted=o,this.author=r,this.likes=s,this.likedBy=l,this.documentId=c,this.memberId=u,this.owner=h,this._editing=!1,this._dom={},this._handlers={cancelEdit:function(){d._dom.editTextarea.value=d.body,a.dispatch(d._dom.editTextarea,"change"),d.editing=!1},delete:function(){if(window.confirm("Please confirm you wish to delete this comment?")){var e=new FormData;e.append("comment",d.id),fetch("/x/delete-comment",{credentials:"same-origin",method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){"success"===e.status&&a.dispatch(d._dom.container,"commentdeleted",{comment:d})}))}},edit:function(){d.editing=!0},like:function(){var e=new FormData;e.append("comment",d.id),d.isLiked&&e.append("remove",!0),fetch("/x/like-comment",{credentials:"same-origin",method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){d.isLiked?(d.likedBy.delete(d.memberId),delete d._dom.likes.dataset.commentLiked):(d.likedBy.add(d.memberId),d._dom.likes.dataset.commentLiked=""),d.likes=d.likedBy.size,d._dom.likes.dataset.commentLikeCount=Object(P.b)(d.likes)}))},saveEdit:function(){var e=d._dom.editTextarea.value.trim();if(!("sending"in d._dom.editField.dataset)){if(""===e)return d._dom.editTextarea.value="",void d._dom.editTextarea.focus();d._clearEditFieldError(),d._dom.editField.dataset.sending="",d._dom.editTextarea.setAttribute("readonly","");var t=new FormData;t.append("comment",d.id),t.append("body",e),fetch("/x/edit-comment",{credentials:"same-origin",method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){if("success"===e.status){var t=e.payload.comment;d._dom.editTextarea.value=t.body,d._dom.comment.innerHTML=t.body_html,d.editing=!1}else d._postEditFieldError(e.reason);delete d._dom.editField.dataset.sending,d._dom.editTextarea.removeAttribute("readonly")}))}},updatePosted:function(){d._dom.ago.textContent=d.postedAgo}}}var t,n,i;return t=e,i=[{key:"fromJSONType",value:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new e(t._id,t.body,t.body_html,ne(t.posted),t.member,t.likes,new Set(t.liked_by),n,a,i)}}],(n=[{key:"append",value:function(e){if(this._dom.container=e,this._dom.item=a.create("div",{class:"comments__item | comment-item"}),this.isAuthor&&(this._dom.item.dataset.isAuthor=""),this.editing&&(this._dom.item.dataset.commentEditing=""),this._dom.comment=a.create("p",{class:"comment-item__comment"}),this._dom.comment.innerHTML=this.bodyHTML,this._dom.item.appendChild(this._dom.comment),this.isAuthor){this._dom.editField=a.create("div",{class:["comment-item__edit-comment","field","field--textarea"].join(" ")}),this._dom.item.appendChild(this._dom.editField);var t=a.create("label",{for:"comment_".concat(this.id),class:"field__label"});t.textContent="Comment",this._dom.editField.appendChild(t),this._dom.editTextarea=a.create("textarea",{id:"comment_".concat(this.id),class:"comment-item__edit-field  field__input",name:"comment",value:this.body}),this._dom.editField.appendChild(this._dom.editTextarea),this._dom.editSave=a.create("div",{class:"comment-item__edit-save"}),this._dom.editSave.textContent="Save",this._dom.editField.appendChild(this._dom.editSave),this._dom.editCancel=a.create("div",{class:"comment-item__edit-cancel"}),this._dom.editCancel.textContent="Cancel",this._dom.editField.appendChild(this._dom.editCancel),a.listen(this._dom.editSave,{click:this._handlers.saveEdit}),a.listen(this._dom.editCancel,{click:this._handlers.cancelEdit}),this._mentionsTypeahead=new _.typeahead.Typeahead(this._dom.editTextarea,{autoFirst:!0,element:"member",fetch:"ajax",filter:"contains",input:"comment",list:"/x/commentators-typeahead?creation=".concat(this.documentId),minChars:2,query:"at"}),this._mentionsTypeahead.init()}var n=a.create("div",{class:"comment-item__meta"});this._dom.item.appendChild(n);var i=a.create("a",{href:this.author.url,class:"comment-item__author"});n.appendChild(i);var o=a.create("div",{class:"comment-item__author-pic"});this.author.picture&&(o.style.backgroundImage="url('".concat(this.author.picture,"')")),i.appendChild(o);var r=a.create("span",{class:"comment-item__posted"});i.appendChild(r);var s=a.create("span",{class:"comment-item__name"});s.textContent=this.author.name,r.appendChild(s),this._dom.ago=a.create("span",{class:"comment-item__ago"}),this._dom.ago.textContent=this.postedAgo,r.appendChild(this._dom.ago);var l=a.create("ul",{class:"comment-item__actions | comment-item-actions"});this._dom.item.appendChild(l),this.isAuthor&&(this._dom.edit=a.create("li",{class:["comment-item-actions__item","comment-item-actions__item--edit"].join(" ")}),l.appendChild(this._dom.edit),a.listen(this._dom.edit,{click:this._handlers.edit})),(this.isAuthor||this.owner)&&(this._dom.delete=a.create("li",{class:["comment-item-actions__item","comment-item-actions__item--delete"].join(" ")}),l.appendChild(this._dom.delete),a.listen(this._dom.delete,{click:this._handlers.delete})),this._dom.likes=a.create("li",{class:["comment-item-actions__item","comment-item-actions__item--likes"].join(" "),"data-comment-like-count":Object(P.b)(this.likes)}),this.isLiked&&(this._dom.likes.dataset.commentLiked=""),l.appendChild(this._dom.likes),this.isAuthor||a.listen(this._dom.likes,{click:this._handlers.like}),a.listen(document,{commentpulse:this._handlers.updatePosted}),e.appendChild(this._dom.item),this.isAuthor&&g([this._dom.editTextarea])}},{key:"remove",value:function(){this._dom.comment&&(this._dom.container.removeChild(this._dom.item),this._dom={},a.ignore(document,{commentpulse:this._handlers.updatePosted}),this._mentionsTypeahead&&this._mentionsTypeahead.destroy())}},{key:"_clearEditFieldError",value:function(){this._dom.editField.classList.remove("field--has-errors");var e=a.one("[data-field-errors]",this._dom.editField);e&&this._dom.editField.removeChild(e)}},{key:"_postEditFieldError",value:function(e){this._dom.editField.classList.add("field--has-errors");var t=a.create("span",{class:"field__errors","data-field-errors":""});t.textContent=e,this._dom.editField.appendChild(t)}},{key:"editing",get:function(){return this._editing},set:function(e){e?this._dom.item.dataset.commentEditing="":delete this._dom.item.dataset.commentEditing,this._editing=e}},{key:"isAuthor",get:function(){return this.memberId===this.author._id}},{key:"isLiked",get:function(){return this.likedBy.has(this.memberId)}},{key:"postedAgo",get:function(){return te(this.posted)}}])&&ie(t.prototype,n),i&&ie(t,i),e}();function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){var t="function"==typeof Map?new Map:void 0;return(ce=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return he(e,arguments,_e(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),me(a,e)})(e)}function ue(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function he(e,t,n){return(he=ue()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&me(i,n.prototype),i}).apply(null,arguments)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pe=function(e){function t(){return le(this,t),de(this,_e(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,e),t}(ce(Error)),fe=function(){function e(t){var n=this;le(this,e),this._documentId=null,this._memberId=null;var i=Object(d.a)("member_info");if(i)try{this._memberId=JSON.parse(Object(d.b)(i)).id}catch(e){this._memberId=null}this._comments=[],this._page=1,this._type=t.dataset.commentsType,this._dom={comments:a.one("[data-comments-comments]",t),container:t,heading:a.one("[data-comments-heading]",t),next:a.one("[data-comments-next]",t),pagination:a.one("[data-comments-pagination]",t),postBtn:a.one("[data-comments-post-btn]",t),postField:a.one("[data-comments-post-field]",t),postForm:a.one("[data-comments-post-form]",t),prev:a.one("[data-comments-prev]",t),sorters:a.one("[data-comments-sorters]",t)},this._handlers={removeComment:function(e){e.comment.remove();var t=n._comments.indexOf(e.comment);t>-1&&n._comments.splice(t,1),n.update()},next:function(){n.nextPage&&(n.page=n.nextPage)},postComment:function(){var e=a.one('textarea[name="comment"]',n._dom.postField),i=e.value.trim();if(!("sending"in n._dom.postForm.dataset)){if(""===i)return e.value="",void e.focus();n._clearFormError(),n._dom.postForm.dataset.sending="",e.setAttribute("readonly","");var o=new FormData;o.append("document_id",n._documentId),o.append("type",t.dataset.commentsType),o.append("body",i),fetch("/x/post-comment",{credentials:"same-origin",method:"POST",body:o}).then((function(e){return e.json()})).then((function(t){if("success"===t.status){var i=oe.fromJSONType(t.payload.comment,n._documentId,n._memberId,n._memberId===n._ownerId);n._comments.push(i),e.value="",a.dispatch(e,"change"),n.sort("newest"),n.page=1}else n._postFormError(t.reason);delete n._dom.postForm.dataset.sending,e.removeAttribute("readonly")}))}},prev:function(){n.prevPage&&(n.page=n.prevPage)},sort:function(e){var t=e.target.dataset.commentsOrder;!t||"commentsSortedBy"in e.target.dataset||(n.sort(t),n.page=1)}}}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=this._comments[Symbol.iterator]();!(e=(i=o.next()).done);e=!0)i.value.remove()}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this._comments=[],a.ignore(this._dom.prev,{click:this._handlers.prev}),a.ignore(this._dom.next,{click:this._handlers.next}),a.ignore(this._dom.sorters,{click:this._handlers.sort}),a.ignore(this._dom.postBtn,{click:this._handlers.postComment}),a.ignore(this._dom.container,{deletecomment:this._handlers.deleteComment}),this._mentionsTypeahead.destroy()}},{key:"init",value:function(e,t){var n=this;this._dom.container._commentsBlock=this,this._documentId=e,this._ownerId=t,a.listen(this._dom.prev,{click:this._handlers.prev}),a.listen(this._dom.next,{click:this._handlers.next}),a.listen(this._dom.sorters,{click:this._handlers.sort}),a.listen(this._dom.postBtn,{click:this._handlers.postComment}),a.listen(this._dom.container,{commentdeleted:this._handlers.removeComment}),setInterval((function(){a.dispatch(document,"commentpulse")}),15e3);var i=this._type;this._mentionsTypeahead=new _.typeahead.Typeahead(a.one('textarea[name="comment"]',this._dom.postField),{autoFirst:!0,element:"member",fetch:"ajax",filter:"contains",input:"comment",list:"/x/commentators-typeahead?target=".concat(e)+"&type=".concat(i),minChars:2,query:"at"}),this._mentionsTypeahead.init(),fetch("/x/comments?creation=".concat(e)).then((function(e){return e.json()})).then((function(e){var t=!0,a=!1,i=void 0;try{for(var o,r=e.payload.comments[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value,l=oe.fromJSONType(s,n._documentId,n._memberId,n._memberId===n._ownerId);n._comments.push(l)}}catch(e){a=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(a)throw i}}n.sort("oldest"),n.update()}))}},{key:"sort",value:function(e){switch(e){case"oldest":this._comments.sort((function(e,t){return e.posted>=t.posted?1:-1}));break;case"newest":this._comments.sort((function(e,t){return t.posted>=e.posted?1:-1}));break;case"liked":this._comments.sort((function(e,t){return t.likes>=e.likes?1:-1}))}for(var t=0,n=Array.from(this._dom.sorters.children);t<n.length;t++)delete n[t].dataset.commentsSortedBy;a.one('[data-comments-order="'.concat(e,'"]')).dataset.commentsSortedBy=""}},{key:"update",value:function(){var e=!0,t=!1,n=void 0;try{for(var a,i=this._comments[Symbol.iterator]();!(e=(a=i.next()).done);e=!0)a.value.remove()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}var o=!0,r=!1,s=void 0;try{for(var l,c=this.visibleComments[Symbol.iterator]();!(o=(l=c.next()).done);o=!0)l.value.append(this._dom.comments)}catch(e){r=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw s}}0===this.commentCount?delete this._dom.container.dataset.hasComments:this._dom.container.dataset.hasComments="",1===this.commentCount?this._dom.heading.textContent="".concat(this.commentCount," comment"):this._dom.heading.textContent="".concat(Object(P.b)(this.commentCount)," comments"),delete this._dom.pagination.dataset.commentsHasNextPage,delete this._dom.pagination.dataset.commentsHasPrevPage,this.nextPage&&(this._dom.pagination.dataset.commentsHasNextPage=""),this.prevPage&&(this._dom.pagination.dataset.commentsHasPrevPage=""),Object(d.a)("member_info")?(this._dom.postForm.dataset.commentsPostAuth="",delete this._dom.postForm.dataset.commentsPostNonAuth):(this._dom.postForm.dataset.commentsPostNonAuth="",delete this._dom.postForm.dataset.commentsPostAuth)}},{key:"_clearFormError",value:function(){this._dom.postField.classList.remove("field--has-errors");var e=a.one("[data-field-errors]",this._dom.postField);e&&this._dom.postField.removeChild(e)}},{key:"_postFormError",value:function(e){this._dom.postField.classList.add("field--has-errors");var t=a.create("span",{class:"field__errors","data-field-errors":""});t.textContent=e,this._dom.postField.appendChild(t)}},{key:"commentCount",get:function(){return this._comments.length}},{key:"page",get:function(){return this._page},set:function(e){if(e<1||e>this.pageCount)throw new pe;this._page=e,this.update(),S.a.scrollToElement(this._dom.heading,[0,-32],.25,null,a.closest(this._dom.container,"[data-creation-expand]")||null)}},{key:"pageCount",get:function(){return Math.max(1,parseInt(Math.ceil(this.commentCount/e.PER_PAGE),10))}},{key:"nextPage",get:function(){return this.page>=this.pageCount?null:this.page+1}},{key:"prevPage",get:function(){return this.page<=1?null:this.page-1}},{key:"visibleComments",get:function(){var t=e.PER_PAGE*(this.page-1);return this._comments.slice(t,t+e.PER_PAGE)}}])&&se(t.prototype,n),i&&se(t,i),e}();fe.PER_PAGE=10;var ve=n(25);function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function we(e,t,n){return t&&ge(e.prototype,t),n&&ge(e,n),e}var be=function(){function e(t,n,i){if(ye(this,e),this._dom={container:t,author:null},this._dom.author=a.create("div",{class:"creation-meta__author | author"}),n.picture){var o=n.picture.variations.medium.url,r=a.create("a",{href:n.url,class:"author__image",style:"background-image: url('".concat(o,"')")});this._dom.author.appendChild(r)}var s=a.create("div",{class:"author__name"});s.textContent="by ",this._dom.author.appendChild(s);var l=a.create("a",{href:"/".concat(n.username),class:"author__link"});l.textContent=n.name,s.append(l);var d=i.getDate(),c=ee(d),u=Z(i),h=i.getFullYear(),m=a.create("p",{class:"author__published-date"});m.innerHTML="\n            on ".concat(d).concat(c," ").concat(u,'\n            <span class="author__year">').concat(h,"</div>\n        "),this._dom.author.append(m),t.appendChild(this._dom.author)}return we(e,[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.author)}}]),e}(),ke=function(){function e(t,n){ye(this,e),this._dom={container:t,info:null},this._dom.info=a.create("div",{class:"creation-meta__info"});var i=a.create("ul",{class:"creation-meta__stats | stats","data-stats":n._id,"data-stats-type":"creation"});this._dom.info.appendChild(i);var o=a.create("li",{class:"stats__stat | stats__stat--views"});i.appendChild(o);var r=a.create("span",{class:"stats__number","data-stat-views":n._id});r.textContent="-",o.appendChild(r);var s=a.create("span",{class:"stats__tooltip"});s.textContent="Unique views",o.appendChild(s);var l=a.create("li",{class:"stats__stat | stats__stat--likes","data-stat-likes":n._id});l.textContent="-",i.appendChild(l);var c=null,u=Object(d.a)("member_info");if(u)try{c=JSON.parse(Object(d.b)(u)).id}catch(e){c=null}this._actions=new ve.a(this._dom.info,n,c===n.member._id),this._actions.actions.classList.add("creation-meta__actions"),t.appendChild(this._dom.info)}return we(e,[{key:"destroy",value:function(){this._actions.destroy(),this._dom.container.removeChild(this._dom.info)}}]),e}(),xe=function(){function e(t,n){ye(this,e),this._creation=n,this._dom={container:t,metadata:null},this._dom.metadata=a.create("div",{class:"creation__meta-data creation-meta"});var i=a.create("div",{class:"creation-meta__byline"});this._dom.metadata.appendChild(i);var o=a.create("div",{class:"creation-meta__title"});o.textContent=n.title,i.appendChild(o),this._author=new be(i,n.member,ne(n.posted)),this._info=new ke(this._dom.metadata,n),this._dom.container.appendChild(this._dom.metadata)}return we(e,[{key:"destroy",value:function(){this._author.destroy(),this._info.destroy(),this._dom.container.removeChild(this._dom.metadata)}}]),e}(),Ce=n(24);function Se(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Te(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Oe=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=i.tags.slice();o.push(i.ref),o.push(i.type),o.push("creation"),o.push(i.member.name.toLowerCase()),o.push(i.member.username.toLowerCase()),i.is_staff_pick&&o.push("staff-pick");var r=!0,s=!1,l=void 0;try{for(var d,c=i.tools[Symbol.iterator]();!(r=(d=c.next()).done);r=!0){var u=d.value;o.push(u.name.toLowerCase())}}catch(e){s=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw l}}o=Se(new Set(o)),this._dom={container:t,product:null},this._dom.product=a.create("div",{class:"product-".concat(n),"data-product-tags":o.join(" | ")}),this._dom.product.setAttribute("data-product-".concat(n),""),this._dom.container.appendChild(this._dom.product)}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.product)}},{key:"product",get:function(){return this._dom.product}}])&&Te(t.prototype,n),i&&Te(t,i),e}();function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ee(e,t,n){return t&&Pe(e.prototype,t),n&&Pe(e,n),e}var Le=function(){function e(t,n){Ie(this,e),this._dom={container:t,comments:null},this._dom.comments=a.create("div",{class:"creation__comments | comments","data-comments":"","data-comments-type":"creation","data-comments-document":n._id});var i=a.create("div",{class:"comments__header"});this._dom.comments.appendChild(i);var o=a.create("p",{class:"comments__heading","data-comments-heading":""});o.textContent="Fetching comments...",i.appendChild(o);var r=a.create("div",{class:"comments__sorters | sorters","data-comments-sorters":""});i.appendChild(r);for(var s=0,l=["Oldest","Newest","Liked"];s<l.length;s++){var d=l[s],c=a.create("div",{class:"sorters__link","data-comments-order":d.toLowerCase()});c.textContent=d,r.appendChild(c)}var u=a.create("div",{class:"comments__list","data-comments-comments":""});this._dom.comments.appendChild(u);var h=a.create("nav",{class:"comments__pagination pagination","data-comments-pagination":""});this._dom.comments.appendChild(h);var m=a.create("div",{class:"pagination__btn pagination__btn--prev btn btn--two","data-comments-prev":""});m.innerHTML='<span class="pagination__btn-text">Previous</span>',h.appendChild(m);var _=a.create("div",{class:"pagination__btn pagination__btn--next btn btn--two","data-comments-next":""});_.innerHTML='<span class="pagination__btn-text">Next</span>',h.appendChild(_);var p=a.create("div",{class:"comments__form comment-form","data-comments-post-form":"","data-comments-post-auth":""});this._dom.comments.appendChild(p);var f=a.create("h3",{class:"comment-form__heading"});f.textContent="Post a comment",p.appendChild(f);var v=a.create("div",{class:"comment-form__auth"}),y=a.create("div",{class:"field field--textarea","data-comments-post-field":""}),w=a.create("label",{class:"field__label"});w.textContent="Comment",y.appendChild(w);var b=a.create("textarea",{name:"comment",class:"field__input","data-mentions":n._id});y.appendChild(b),v.appendChild(y);var k=a.create("button",{type:"submit",class:"comment-form__btn | btn btn--one","data-comments-post-btn":""});k.textContent="Post",v.appendChild(k),p.appendChild(v);var x=a.create("div",{class:"comment-form__non-auth"}),C=a.create("a",{href:"/sign-in?next=".concat(n.url),class:"btn btn--two"});C.textContent="Sign in / Sign up to post a comment",x.appendChild(C),p.appendChild(x),setTimeout((function(){g([b])}),0),t.appendChild(this._dom.comments),this._comments=new fe(this._dom.comments),this._comments.init(n._id,n.member._id)}return Ee(e,[{key:"destroy",value:function(){this._comments.destroy(),this._dom.container.removeChild(this._dom.comments)}}]),e}(),Ae=function(){function e(t,n){Ie(this,e),this._dom={container:t,palette:null},this._dom.palette=a.create("div",{class:"creation__colour-palette | colour-palette"});var i=a.create("h4",{class:"colour-palette__heading"});i.textContent="Colour palette",this._dom.palette.appendChild(i);var o=a.create("div",{class:"colour-palette__list"});this._dom.palette.appendChild(o);var r=!0,s=!1,l=void 0;try{for(var d,c=n.base_colour_palette[Symbol.iterator]();!(r=(d=c.next()).done);r=!0){var u=d.value,h=a.create("a",{href:"/galleries/search?colour=".concat(u[1]),class:"colour-palette__colour",style:"background-color: #".concat(u[0])});o.appendChild(h)}}catch(e){s=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw l}}t.appendChild(this._dom.palette)}return Ee(e,[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.palette)}}]),e}(),Fe=function(){function e(t,n){Ie(this,e),this._dom={container:t,tags:null},this._dom.tags=a.create("div",{class:"creation__tags | tags"});var i=a.create("h4",{class:"tags__heading"});i.textContent="Tags",this._dom.tags.appendChild(i);var o=a.create("ul",{class:"tags__list"});if(this._dom.tags.appendChild(o),n.tag_options){var r=!0,s=!1,l=void 0;try{for(var d,c=n.tag_options[Symbol.iterator]();!(r=(d=c.next()).done);r=!0){var u=je(d.value,2),h=u[0],m=u[1],_=a.create("li",{class:"tags__tag | tag"});o.appendChild(_);var p=a.create("a",{href:"/galleries/search?q=".concat(h),class:"tag__link"});p.textContent=m,_.appendChild(p)}}catch(e){s=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw l}}}t.appendChild(this._dom.tags)}return Ee(e,[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.tags)}}]),e}(),Me=function(){function e(t,n){Ie(this,e),this._dom={container:t,tools:null},this._dom.tags=a.create("div",{class:"creation__tool-tags | tags"});var i=a.create("h4",{class:"tags__heading"});i.textContent="Tools & Techniques",this._dom.tags.appendChild(i);var o=a.create("ul",{class:"tags__list"});if(this._dom.tags.appendChild(o),n.tools.length>0){var r=!0,s=!1,l=void 0;try{for(var d,c=n.tools[Symbol.iterator]();!(r=(d=c.next()).done);r=!0){var u=d.value,h=a.create("li",{class:"tags__tag | tag"});o.appendChild(h);var m=a.create("a",{href:u.url,class:"tag__link"});m.textContent=u.name,h.appendChild(m)}}catch(e){s=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw l}}}t.appendChild(this._dom.tags)}return Ee(e,[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.tags)}}]),e}(),Ne=function(){function e(t,n){if(Ie(this,e),this._dom={container:t,main:null},this._dom.main=a.create("div",{class:"creation__main | layout__main"}),n.description_html){var i=a.create("p",{class:"creation__desc"});i.innerHTML=n.description_html,this._dom.main.appendChild(i)}if(n.is_staff_pick){var o=a.create("p",{class:"creation__staff-pick"}),r=ne("".concat(n.staff_pick_str," 00:00:00")),s=r.getYear()+1900,l=Z(r),d=r.getDate(),c=ee(d),u="".concat(d).concat(c," ").concat(l," ").concat(s);o.innerHTML="Staff pick for ".concat(u),this._dom.main.appendChild(o)}if(n.entry_in){var h=a.create("p",{class:"contest-badges"}),m=!0,_=!1,p=void 0;try{for(var f,v=n.entry_in[Symbol.iterator]();!(m=(f=v.next()).done);m=!0){var y=f.value,g=a.create("li",{class:"contest-badge contest-badge--entry-in"}),w=a.create("a",{href:"/contests/".concat(y.slug),class:"contest-badge__link"});w.innerHTML="Entry in ".concat(y.nav_title),g.appendChild(w),h.appendChild(g)}}catch(e){_=!0,p=e}finally{try{m||null==v.return||v.return()}finally{if(_)throw p}}this._dom.main.appendChild(h)}if(n.winner_in){var b=a.create("p",{class:"contest-badges"}),k=!0,x=!1,C=void 0;try{for(var S,T=n.winner_in[Symbol.iterator]();!(k=(S=T.next()).done);k=!0){var O=S.value,j=a.create("li",{class:"contest-badge contest-badge--winner"}),I=a.create("a",{href:"/contests/".concat(O.slug),class:"contest-badge__link"});I.innerHTML="Winner of ".concat(O.nav_title),j.appendChild(I),b.appendChild(j)}}catch(e){x=!0,C=e}finally{try{k||null==T.return||T.return()}finally{if(x)throw C}}this._dom.main.appendChild(b)}if(n.runner_up_in){var P=a.create("p",{class:"contest-badges"}),E=!0,L=!1,A=void 0;try{for(var F,M=n.runner_up_in[Symbol.iterator]();!(E=(F=M.next()).done);E=!0){var N=F.value,z=a.create("li",{class:"contest-badge contest-badge--runner-up"}),D=a.create("a",{href:"/contests/".concat(N.slug),class:"contest-badge__link"});D.innerHTML="Runner up in ".concat(N.nav_title),z.appendChild(D),P.appendChild(z)}}catch(e){L=!0,A=e}finally{try{E||null==M.return||M.return()}finally{if(L)throw A}}this._dom.main.appendChild(P)}if(n.tutorial){var R=a.create("a",{href:n.tutorial.url,class:"creation__tutorial"});R.innerHTML="View the making of tutorial",this._dom.main.appendChild(R)}this._comments=new Le(this._dom.main,n),t.appendChild(this._dom.main)}return Ee(e,[{key:"destroy",value:function(){this._comments.destroy(),this._dom.container.removeChild(this._dom.main)}}]),e}(),ze=function(){function e(t,n){Ie(this,e),this._dom={container:t,side:null},this._dom.side=a.create("div",{class:"creation__side | layout__side"}),this._vendor=new Ce.a(this._dom.side,"card",n),this._vendor.vendor.classList.add("creation__vendor"),n.base_colour_palette.length>0&&(this._palette=new Ae(this._dom.side,n)),n.tags.length>0&&(this._tags=new Fe(this._dom.side,n)),this._product=new Oe(this._dom.side,"card",n),this._product.product.classList.add("creation__product"),n.tools.length>0&&(this._tools=new Me(this._dom.side,n)),t.appendChild(this._dom.side)}return Ee(e,[{key:"destroy",value:function(){this._vendor.destroy(),this._palette&&this._palette.destroy(),this._tags&&this._tags.destroy(),this._tools&&this._tools.destroy(),this._product&&this._product.destroy(),this._dom.container.removeChild(this._dom.side)}}]),e}(),De=function(){function e(t,n){Ie(this,e),this._dom={container:t,related:null},this._dom.related=a.create("div",{class:"creation__related-work | related-work"});var i=a.create("h3",{class:"related-work__heading"});i.textContent="More from ",this._dom.related.appendChild(i);var o=a.create("a",{href:n.url,class:"related-work__name"});o.textContent=n.name,i.appendChild(o);var r=a.create("ul",{class:"related-work__list"});this._dom.related.appendChild(r);var s=!0,l=!1,d=void 0;try{for(var c,u=n.recent_uploads[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var h=c.value,m=h.images[0].variations.thumb.url,_=["related-work__item","related-work-item"];h.is_staff_pick&&_.push("related-work-item--staff-pick"),h.mature_content&&_.push("related-work-item--mature");var p=a.create("li",{class:_.join(" ")});r.append(p);var f=a.create("div",{class:"related-work-item__container"});p.appendChild(f);var v=a.create("div",{class:"related-work-item__image",style:"background-image: url('".concat(m,"')")});f.appendChild(v);var y=a.create("a",{href:h.url,title:h.title,class:"related-work-item__link","data-expand-on-creation":h.ref});f.appendChild(y)}}catch(e){l=!0,d=e}finally{try{s||null==u.return||u.return()}finally{if(l)throw d}}t.appendChild(this._dom.related)}return Ee(e,[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.related)}}]),e}(),Re=function(){function e(t,n){Ie(this,e),this._creation=n,this._dom={container:t,contents:null},this._dom.contents=a.create("div",{class:"creation__contents"}),this._metadata=new xe(this._dom.contents,this._creation),n.tags||(n.tags=[]),n.tags.push(n.member.name.toLowerCase()),n.tags.push(n.member.username.toLowerCase());var i=a.create("div",{class:"creation__inner layout__inner"});this._dom.contents.appendChild(i),this._main=new Ne(i,n),this._side=new ze(i,n),n.member.recent_uploads.length>0&&(this._related=new De(this._dom.contents,n.member)),this._dom.container.appendChild(this._dom.contents)}return Ee(e,[{key:"destroy",value:function(){this._main.destroy(),this._dom.container.removeChild(this._dom.contents)}}]),e}(),Be=n(2);function He(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Ue=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dom={container:t,shortcuts:null},this._dom.shortcuts=a.create("div",{class:"shortcuts"});var n=a.create("div",{class:"shortcuts__heading"});n.textContent="Keyboard shortcuts",this._dom.shortcuts.appendChild(n);var i=a.create("div",{class:"shortcuts__keys"});this._dom.shortcuts.appendChild(i);var o=a.create("div",{class:"shortcuts__key shortcuts__key--prev"});o.textContent="Previous",i.appendChild(o);var r=a.create("div",{class:"shortcuts__key shortcuts__key--next"});r.textContent="Next",i.appendChild(r);var s=a.create("div",{class:"shortcuts__key shortcuts__key--like"});s.textContent="Like",i.appendChild(s);var l=a.create("div",{class:"shortcuts__key shortcuts__key--escape"});l.textContent="Close",i.appendChild(l),this._dom.container.appendChild(this._dom.shortcuts)}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.shortcuts)}}])&&He(t.prototype,n),i&&He(t,i),e}(),Je=n(21);function Ve(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var We=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._creation=n,this._dom={container:t,view:null};var i=n.type;"20:20"===n.type&&(i="2020"),this._dom.view=a.create("div",{class:["creation__view","creation-view","creation-view--".concat(i)].join(" "),"data-on-seen":"view","data-on-type":"creation","data-on-id":n._id,"data-on-always":""});var o=n.images[0].variations.expanded.url;switch(n.type){case"3d":var r=a.create("div",{class:"creation-view__model"});this._dom.view.appendChild(r);var s=a.create("iframe",{width:944,height:752,src:n.model.embed_url,frameborder:0,allowvr:"",allowfullscreen:"",mozallowfullscreen:"true",webkitallowfullscreen:"true",onmousewheel:"",class:"creation-view__iframe"});r.appendChild(s);break;case"slideshow":this._slideshow=new Je.a(this._dom.view,n.images,"expanded");var l=this._slideshow._dom.slideshow;l.dataset.slideshow="",l.classList.add("creation-view__slideshow"),this._slideshow._dom.slides.dataset.projectOnBigScreen=JSON.stringify(n);break;case"video":var d=a.create("div",{class:"creation-view__video | video","data-video":"hide"});this._dom.view.appendChild(d);var c=a.create("div",{class:"video__image",style:"background-image: url(".concat(o,")")});d.appendChild(c);var u=a.create("div",{class:"video__play-btn","data-video-play":""});d.appendChild(u);var h=a.create("iframe",{type:"text/html",width:944,height:752,src:n.video.embed_url,frameborder:0,allow:"autoplay; encrypted-media",allowfullscreen:"",mozallowfullscreen:"true",webkitallowfullscreen:"true",onmousewheel:"",class:"creation-view__iframe | video__iframe","data-video-player":""});d.appendChild(h);break;default:var m=a.create("div",{class:"creation-view__image",style:"background-image: url(".concat(o,")"),"data-project-on-big-screen":JSON.stringify(n)});this._dom.view.appendChild(m)}this._dom.container.appendChild(this._dom.view)}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){this._slideshow&&(this._slideshow.destroy(),this._slideshow=null),this._dom.container.removeChild(this._dom.view)}}])&&Ve(t.prototype,n),i&&Ve(t,i),e}();function qe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Ye=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._creation=null,this._contents=null,this._view=null,this._dom={close:null,creation:null,help:null,screen:null,viewer:null},this._handlers={close:function(e){"keydown"===e.type&&("Escape"!==e.key||"bigScreenInitialized"in document.body.dataset)||"click"===e.type&&e.target!==n._dom.close&&e.target!==n._dom.screen||(l((function(){n.hide()})),window.history.go(-window.history.state.__index__))},history:function(e){e.state&&e.state.creation?n.populate(e.state.creation,!1):n.hide()},next:function(t){"keydown"===t.type&&("ArrowRight"!==t.key||"value"in document.activeElement||"bigScreenInitialized"in document.body.dataset)||n.hasNextRef&&(n.nextRef?n.fetch(n.nextRef):e.getNextPageURL()&&(window.location=e.getNextPageURL()))},prev:function(t){"keydown"===t.type&&("ArrowLeft"!==t.key||"value"in document.activeElement||"bigScreenInitialized"in document.body.dataset)||n.hasPrevRef&&(n.prevRef?n.fetch(n.prevRef):e.getPrevPageURL()&&(window.location=e.getPrevPageURL()))},scroll:function(){a.dispatch(window,"checkseen")},transitioned:function(){delete n.screen.dataset.transitioning,n.visible?a.dispatch(n.screen,"shown"):a.dispatch(n.screen,"hidden")}}}var t,n,i;return t=e,n=[{key:"clear",value:function(){Object($.a)(),this._view&&(this._view.destroy(),this._view=null),this._contents&&(this._contents.destroy(),this._contents=null),this._creation=null}},{key:"destroy",value:function(){delete document.body.dataset.expandedViewInitialized,s(),Object(Be.b)(),this.clear(),a.ignore(document,{keydown:this._handlers.close}),a.ignore(document,{keydown:this._handlers.next}),a.ignore(document,{keydown:this._handlers.prev}),this.screen&&(this._shortcuts.destroy(),document.body.removeChild(this.screen),this._dom={close:null,creation:null,help:null,screen:null,viewer:null})}},{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=this;"fetching"in this.screen.dataset||(this.screen.dataset.fetching="",this.clear(),fetch("/x/galleries/".concat(e)).then((function(e){return e.json()})).then((function(e){delete t.screen.dataset.fetching,t.populate(e.payload.creation)})))}))},{key:"hide",value:function(){"transitioning"in this.screen.dataset||(Object($.a)(),this.screen.dataset.transitioning="",delete this.screen.dataset.visible)}},{key:"init",value:function(){document.body.dataset.expandedViewInitialized="",this._stateIndex=0,this._dom.screen=a.create("div",{class:"creation-expand","data-creation-expand":""});var e=a.create("div",{class:"creation-expand__logo"});this.screen.appendChild(e);var t=a.create("div",{class:"creation-expand__actions"});this.screen.appendChild(t),this._dom.help=a.create("div",{class:["creation-expand__action-item","creation-expand__action-item--help"].join(" ")}),t.appendChild(this._dom.help),this._shortcuts=new Ue(this._dom.help),this._dom.close=a.create("div",{class:["creation-expand__action-item","creation-expand__action-item--close"].join(" ")}),t.appendChild(this._dom.close),this._dom.viewer=a.create("div",{class:"creation-expand__inner"}),this.screen.appendChild(this._dom.viewer);var n=a.create("div",{class:"creation-expand__nav"});this._dom.viewer.appendChild(n),this._dom.prev=a.create("div",{class:"creation-expand__arrow creation-expand__arrow--prev"}),n.appendChild(this._dom.prev),this._dom.next=a.create("div",{class:"creation-expand__arrow creation-expand__arrow--next"}),n.appendChild(this._dom.next),this._dom.creation=a.create("div",{class:["creation-expand__creation","creation","creation--with-vendor"].join(" ")}),this._dom.viewer.appendChild(this._dom.creation),document.body.appendChild(this.screen),window.getComputedStyle(this.screen).opacity,a.listen(this._dom.screen,{click:this._handlers.close}),a.listen(this._dom.screen,{transitionend:this._handlers.transitioned}),a.listen(this._dom.screen,{scroll:this._handlers.scroll}),a.listen(this._dom.next,{click:this._handlers.next}),a.listen(this._dom.prev,{click:this._handlers.prev}),a.listen(document,{keydown:this._handlers.close}),a.listen(document,{keydown:this._handlers.next}),a.listen(document,{keydown:this._handlers.prev}),l(this._handlers.history),Object(Be.c)()}},{key:"populate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var n={__reload__:!0};this._creation&&(n.creation=this._creation),window.history.pushState(n,document.title,window.url),document.title="".concat(e.title," by ").concat(e.member.name),window.history.replaceState({creation:e,__index__:this._getNextStateIndex(),__reload__:!0},e.title,e.url)}this.clear(),this._creation=e,this._view=new We(this._dom.creation,this._creation),this._contents=new Re(this._dom.creation,this._creation),this.hasPrevRef?this._dom.prev.dataset.visible="":delete this._dom.prev.dataset.visible,this.hasNextRef?this._dom.next.dataset.visible="":delete this._dom.next.dataset.visible,window.gStats.populate(this.screen),Object(d.a)("member_info")&&(window.gLikeBehaviour.apply(),window.gCollectBehaviour.apply()),W.a.order(),D.order(),ga("set","page",window.location.pathname),ga("send","pageview")}},{key:"show",value:function(){"transitioning"in this.screen.dataset||(this.screen.dataset.transitioning="",this.screen.dataset.visible="")}},{key:"_getNextStateIndex",value:function(){return this._stateIndex+=1,this._stateIndex}},{key:"hasNextRef",get:function(){return this.navigableRefs.indexOf(this._creation.ref)>-1&&null!==(this.nextRef||e.getNextPageURL())}},{key:"hasPrevRef",get:function(){return this.navigableRefs.indexOf(this._creation.ref)>-1&&null!==(this.prevRef||e.getPrevPageURL())}},{key:"navigableRefs",get:function(){var e=this;return a.many("[data-expand-on-creation]").filter((function(t){return!e.screen.contains(t)})).map((function(e){return e.dataset.expandOnCreation}))}},{key:"nextRef",get:function(){var e=this.navigableRefs,t=e.indexOf(this._creation.ref);return t<e.length-1?e[t+1]:null}},{key:"prevRef",get:function(){var e=this.navigableRefs,t=e.indexOf(this._creation.ref);return t>0?e[t-1]:null}},{key:"screen",get:function(){return this._dom.screen}},{key:"visible",get:function(){return"visible"in this._dom.screen.dataset}}],i=[{key:"getNextPageURL",value:function(){var e=a.one("[data-next-page]");return e?e.href:null}},{key:"getPrevPageURL",value:function(){var e=a.one("[data-prev-page]");return e?e.href:null}}],n&&qe(t.prototype,n),i&&qe(t,i),e}();function Ge(){if(a.one("[data-expand-on-creation]")){var e=new Ye;window.history.replaceState({__reload__:!0,__root__:!0},document.title,window.url),l((function(n){var i=(n.state.creation||{}).ref;i&&a.one("[data-expand-on-creation='".concat(i,"']"))?(e.screen&&(a.ignore(e.screen,{hidden:t}),e.destroy()),e.init(),e.show(),e.populate(n.state.creation,!1),a.listen(e.screen,{hidden:t})):r()}),!0),a.listen(document,{click:function(n){if(!("removeFromCollection"in n.target.dataset)){var i,o=a.closest(n.target,"[data-expand-on-creation]");if(o){if(n.preventDefault(),e.screen&&e.screen.contains(o))return void e.fetch(o.dataset.expandOnCreation);e.screen&&(a.ignore(e.screen,{hidden:t}),e.destroy()),e.init(),e.show(),e.__showFirst=(i=o.dataset.expandOnCreation,function(){a.ignore(e.screen,{shown:e.__showFirst}),delete e.__showFirst,e.fetch(i)}),a.listen(e.screen,{shown:e.__showFirst}),a.listen(e.screen,{hidden:t})}}}})}function t(){e.destroy()}}function Xe(){q.b(),Ge(),a.listen(document,{mouseover:Y}),a.listen(document,{mouseout:G});var e=a.one("[data-colour-filter]");e&&new K(e).init()}function Ke(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var $e=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fetched=!1,this._commentedOn=new Set}var t,n,i;return t=e,(n=[{key:"apply",value:function(){var e=this,t=function(){var t=!0,n=!1,i=void 0;try{for(var o,r=a.many("[data-comment]")[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value;e.commentedOn(s.dataset.comment)&&(s.dataset.commentedOn="")}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}};this._fetched?t():this._fetchCommentedOn().then((function(){t()}))}},{key:"commentedOn",value:function(e){return this._commentedOn.has(e)}},{key:"_fetchCommentedOn",value:function(){var e=this;return fetch("/x/commented-on",{credentials:"same-origin"}).then((function(e){return e.json()})).then((function(t){e._fetched=!0,e._commentedOn=new Set(t.payload.commented_on)}))}}])&&Ke(t.prototype,n),i&&Ke(t,i),e}(),Qe=n(20);function Ze(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var et=n(43),tt=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fetched=!1,this._followed=new Set,this._sfx=new Audio(et),this._handlers={hideUnfollow:function(e){delete e.currentTarget.dataset.unfollow},showUnfollow:function(e){"followed"in e.currentTarget.dataset&&(e.currentTarget.dataset.unfollow="")},toggle:function(e){var n=a.closest(e.target,"[data-follow]");n&&"followToggle"in n.dataset&&(e.preventDefault(),t.follows(n.dataset.follow)?t.removeFollow(n.dataset.follow):t.follow(n,n.dataset.follow),delete n.dataset.unfollow)}}}var t,n,i;return t=e,(n=[{key:"apply",value:function(){var e=this,t=function(){var t=!0,n=!1,i=void 0;try{for(var o,r=a.many("[data-follow]")[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value;e.follows(s.dataset.follow)&&(s.dataset.followed=""),s.getBoundingClientRect(),delete s.dataset.noTransitions,a.listen(s,{mouseenter:e._handlers.showUnfollow}),a.listen(s,{mouseleave:e._handlers.hideUnfollow})}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}a.ignore(document,{click:e._handlers.toggle}),a.listen(document,{click:e._handlers.toggle})};this._fetched?t():this._fetchFollows().then((function(){t()}))}},{key:"follow",value:function(e,t){var n=this,i=new FormData;return i.append("member",t),fetch("/x/follow",{credentials:"same-origin",method:"POST",body:i}).then((function(e){return e.json()})).then((function(e){n._followed.add(t);var i=!0,o=!1,r=void 0;try{for(var s,l=a.many('[data-stat-followers="'.concat(t,'"]'))[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)s.value.textContent=e.payload.followers}catch(e){o=!0,r=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw r}}var d=!0,c=!1,u=void 0;try{for(var h,m=a.many('[data-follow="'.concat(t,'"]'))[Symbol.iterator]();!(d=(h=m.next()).done);d=!0)h.value.dataset.followed=""}catch(e){c=!0,u=e}finally{try{d||null==m.return||m.return()}finally{if(c)throw u}}n._sfx.play()}))}},{key:"follows",value:function(e){return this._followed.has(e)}},{key:"init",value:function(){return this._fetchFollows()}},{key:"removeFollow",value:function(e){var t=this,n=new FormData;return n.append("member",e),n.append("remove",!0),fetch("/x/follow",{credentials:"same-origin",method:"POST",body:n}).then((function(e){return e.json()})).then((function(n){t._followed.delete(e);var i=!0,o=!1,r=void 0;try{for(var s,l=a.many('[data-stat-followers="'.concat(e,'"]'))[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)s.value.textContent=n.payload.followers}catch(e){o=!0,r=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw r}}var d=!0,c=!1,u=void 0;try{for(var h,m=a.many('[data-follow="'.concat(e,'"]'))[Symbol.iterator]();!(d=(h=m.next()).done);d=!0)delete h.value.dataset.followed}catch(e){c=!0,u=e}finally{try{d||null==m.return||m.return()}finally{if(c)throw u}}}))}},{key:"_fetchFollows",value:function(){var e=this;return fetch("/x/follows",{credentials:"same-origin"}).then((function(e){return e.json()})).then((function(t){e._fetched=!0,e._followed=new Set(t.payload.follows)}))}}])&&Ze(t.prototype,n),i&&Ze(t,i),e}();function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function it(e,t,n){return t&&at(e.prototype,t),n&&at(e,n),e}var ot=function(){function e(t,n,a){nt(this,e),this._parent=t,this._particleCount=n,this._genParticle=a,this._particles=[],this._mainLoop=null,this._lastUpdate=null}return it(e,[{key:"emit",value:function(){for(var e=this,t=0;t<this._particleCount;t+=1){var n=this._genParticle();this._particles.push(n),this._parent.appendChild(n.elm)}return new Promise((function(t,n){e._lastUpdate=new Date,e._mainLoop=setInterval((function(){var n=new Date;e.update((n-e._lastUpdate)/1e3)&&t(),e._lastUpdate=n}),10)}))}},{key:"update",value:function(e){var t=this;return this._particles=this._particles.filter((function(n){return n.update(e),n.dead&&t._parent.removeChild(n.elm),!n.dead})),0===this._particles.length&&(clearInterval(this._mainLoop),!0)}}]),e}(),rt=function(){function e(t,n,i,o,r,s,l,d,c){nt(this,e),this._elm=a.create("div",{class:t}),this._pos=n,this._rot=i,this._scale=o,this._velocity=r,this._velocityDelta=s,this._rotationVelocity=l,this._age=0,this._lifespan=c,this._calcOpacity=d}return it(e,[{key:"update",value:function(e){this._velocity[0]+=e*this._velocityDelta[0],this._velocity[1]+=e*this._velocityDelta[1],this._rot+=e*this._rotationVelocity,this._pos[0]+=e*this._velocity[0],this._pos[1]+=e*this._velocity[1],this._age+=e;var t="translate(".concat(this._pos[0],"px, ").concat(this._pos[1],"px)"),n="rotate(".concat(this._rot,"deg)"),a="scale(".concat(this._scale,")");this.elm.style.transform=[t,n,a].join(" "),this.elm.style.opacity=this._calcOpacity(this._age,this._lifespan)}},{key:"dead",get:function(){return this._age>=this._lifespan}},{key:"elm",get:function(){return this._elm}}]),e}();function st(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var lt=n(44),dt=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fetched=!1,this._liked=new Set,this._sfx=new Audio(lt),this._handlers={toggle:function(e){var n=[];if("keydown"===e.type)"l"!==e.key||"value"in document.activeElement||document.activeElement.isContentEditable||(n=a.many("[data-like]").filter((function(e){return"likeToggle"in e.dataset})));else if("click"===e.type){var i=a.closest(e.target,"[data-like]");i&&"likeToggle"in i.dataset&&(n=[i])}0!==n.length&&(e.preventDefault(),t.likes(n[0].dataset.like)?t.removeLike(n[0].dataset.likeType,n[0].dataset.like):t.like(n,n[0].dataset.likeType,n[0].dataset.like))}}}var t,n,i;return t=e,(n=[{key:"apply",value:function(){var e=this,t=function(){var t=!0,n=!1,i=void 0;try{for(var o,r=a.many("[data-like]")[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value;e.likes(s.dataset.like)&&(s.dataset.liked="")}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}a.ignore(document,{click:e._handlers.toggle,keydown:e._handlers.toggle}),a.listen(document,{click:e._handlers.toggle,keydown:e._handlers.toggle})};this._fetched?t():this._fetchLikes().then((function(){t()}))}},{key:"like",value:function(e,t,n){var i=this,o=new FormData;return o.append(t,n),fetch("/x/like",{credentials:"same-origin",method:"POST",body:o}).then((function(e){return e.json()})).then((function(t){i._liked.add(n);var o=!0,r=!1,s=void 0;try{for(var l,d=a.many('[data-stat-likes="'.concat(n,'"]'))[Symbol.iterator]();!(o=(l=d.next()).done);o=!0)l.value.textContent=t.payload.likes}catch(e){r=!0,s=e}finally{try{o||null==d.return||d.return()}finally{if(r)throw s}}var c=!0,u=!1,h=void 0;try{for(var m,_=a.many('[data-like="'.concat(n,'"]'))[Symbol.iterator]();!(c=(m=_.next()).done);c=!0)m.value.dataset.liked=""}catch(e){u=!0,h=e}finally{try{c||null==_.return||_.return()}finally{if(u)throw h}}i._sfx.play();var p=!0,f=!1,v=void 0;try{for(var y,g=e[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var w=y.value;new ot(w,20,(function(){var e=Math.random;return new rt("particle particle--heart",[20*e()-10,20*e()-10],90*e()-45,.3*e()+.2,[250*e()-125,250*e()-200],[0,250],1440*e()-720,(function(e,t){var n=e/t;return 1-n*n}),.75*e()+.25)})).emit()}}catch(e){f=!0,v=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw v}}}))}},{key:"likes",value:function(e){return this._liked.has(e)}},{key:"removeLike",value:function(e,t){var n=this,i=new FormData;return i.append(e,t),i.append("remove",!0),fetch("/x/like",{credentials:"same-origin",method:"POST",body:i}).then((function(e){return e.json()})).then((function(e){n._liked.delete(t);var i=!0,o=!1,r=void 0;try{for(var s,l=a.many('[data-stat-likes="'.concat(t,'"]'))[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)s.value.textContent=e.payload.likes}catch(e){o=!0,r=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw r}}var d=!0,c=!1,u=void 0;try{for(var h,m=a.many('[data-like="'.concat(t,'"]'))[Symbol.iterator]();!(d=(h=m.next()).done);d=!0)delete h.value.dataset.liked}catch(e){c=!0,u=e}finally{try{d||null==m.return||m.return()}finally{if(c)throw u}}}))}},{key:"_fetchLikes",value:function(){var e=this;return fetch("/x/likes",{credentials:"same-origin"}).then((function(e){return e.json()})).then((function(t){e._fetched=!0,e._liked=new Set(t.payload.likes)}))}}])&&st(t.prototype,n),i&&st(t,i),e}();function ct(){var e=!0;window.innerWidth<T.a.breakpoints.large&&(e=!1);var t=document.documentElement.scrollTop;t<a.one("[data-profile-meta-data]").getBoundingClientRect().top+48&&(e=!1),t<parseInt(a.one("[data-profile-meta-data]").dataset.bottom,10)&&(e=!1);var n=a.one("[data-profile]");e?n.dataset.profileFixed="":delete n.dataset.profileFixed}function ut(){var e;(e=a.one("[data-comments]"))&&new fe(e).init(e.dataset.commentsDocument,e.dataset.commentsOwner),function(){if(a.one("[data-profile-side]")){var e=a.one("[data-profile-meta-data]").getBoundingClientRect().height;a.one("[data-profile-side]").style.minHeight="".concat(e,"px");var t=a.one("[data-profile-meta-data]");t.dataset.bottom=t.getBoundingClientRect().bottom+document.documentElement.scrollTop,ct(),a.listen(window,{"resize scroll":ct})}}(),Object(d.a)("member_info")&&(window.gCollectBehaviour=new Qe.a,a.many("[data-collect]").length>0&&window.gCollectBehaviour.apply(),window.gCommentedOnBehaviour=new $e,a.many("[data-comment]").length>0&&window.gCommentedOnBehaviour.apply(),window.gLikeBehaviour=new dt,a.many("[data-like]").length>0&&window.gLikeBehaviour.apply(),window.gFollowBehaviour=new tt,a.many("[data-follow]").length>0&&window.gFollowBehaviour.apply())}var ht={"Support / Feedback":"support","Copyright / Trademark violations":"copyright","Contributing tutorials to 3dtotal":"tutorials","Advertising on 3dtotal":"advertising","Posting a job on 3dtotal":"jobs","Account suspension":"suspension",Other:"other"};function mt(e){var t=e.target.value,n=ht[t],i=!0,o=!1,r=void 0;try{for(var s,l=a.many("[data-topics]",e.target.form)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var d=s.value;d.dataset.topics.split(" ").indexOf(n)>=0?d.classList.remove("hide"):d.classList.add("hide")}}catch(e){o=!0,r=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw r}}}function _t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var pt=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=t.dataset.countDown.split(" "),i=a[0].split("-"),o=a[1].split(":");this._launchDate=new Date(i[0],i[1]-1,i[2],o[0],o[1]),this._dom={countDown:null,days:null,hours:null,minutes:null},this._dom.countDown=t,this._handlers={sync:function(e){n._sync()}}}var t,n,i;return t=e,(n=[{key:"init",value:function(){this._dom.days=a.one("[data-count-down-days]",this._dom.countDown),this._dom.hours=a.one("[data-count-down-hours]",this._dom.countDown),this._dom.minutes=a.one("[data-count-down-minutes]",this._dom.countDown),this._handlers.sync(),setInterval(this._handlers.sync,1e3)}},{key:"_sync",value:function(){var e=Date.now(),t=(this._launchDate-e)/1e3,n=Math.floor(t/86400);t-=Math.abs(86400*n);var a=Math.floor(t/3600)%24;t-=Math.abs(3600*a);var i=Math.floor(t/60)%60;this._dom.days.textContent="-",n>0&&(this._dom.days.textContent=n),this._dom.hours.textContent="-",a>0&&(this._dom.hours.textContent=a),this._dom.minutes.textContent="-",i>0&&(this._dom.minutes.textContent=i)}}])&&_t(t.prototype,n),i&&_t(t,i),e}();a.listen(window,{DOMContentLoaded:function(){var e;o("replaceState"),o("pushState"),s(),a.listen(window,{popstate:function(e){i._handler(e)}}),N(),w(),function(){var e=new k,t=a.many("[data-full-view]");if(t.length>0&&e.init(t),window.MANHATTAN_CONTENT_BASE_URL){var n=window.ContentTools.EditorApp.get();a.listen(n,{start:function(){e&&e.destroy()}}),a.listen(n,{stopped:function(){(t=a.many("[data-full-view]")).length&&e.init(t)}})}}(),function(){if(C.addInfoLinks(),window.MANHATTAN_CONTENT_BASE_URL){var e=window.ContentTools.EditorApp.get();a.listen(e,{start:function(){C.removeInfoLinks()}}),a.listen(e,{stopped:function(){C.addInfoLinks()}})}}(),a.listen(document,{click:function(e){var t=a.closest(e.target,"[data-video]");if(t&&(e.preventDefault(),!("ContentTools"in window&&ContentTools.EditorApp.get().isEditing()))){t.dataset.video="show";var n=a.one("[data-video-player]",t),i=n.getAttribute("src");i.startsWith("https://www.youtube.com")?n.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*"):i.startsWith("https://player.vimeo.com")&&new Vimeo.Player(n).play()}}}),(new J).init(),V.b(),function(){if(a.one("[data-jump-links]")){var e=new I(a.one("[data-jump-links]")),t=a.many("[data-jump-link]");if(t.length&&e.init(t),window.MANHATTAN_CONTENT_BASE_URL){var n=window.ContentTools.EditorApp.get();a.listen(n,{start:function(){e.destroy()}}),a.listen(n,{stopped:function(){(t=a.many("[data-jump-link]")).length&&e.init(t)}})}}}(),R.b(),Xe(),ut(),function(){var e=a.one("[data-contact-form]");if(e){var t=a.one('[name="topic"]',e);a.listen(t,{change:mt}),a.dispatch(t,"change")}}(),function(){var e=!0,t=!1,n=void 0;try{for(var i,o=a.many("[data-count-down]")[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value;new pt(r).init()}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}(),0!==a.many("[data-stats]").length&&(window.gStats=H,window.gStats.populate()),W.b(),D.order(),"declined"===(e=Object(d.a)("cookie_consent"))||"accepted"===e||(new u).init(),setTimeout((function(){delete document.body.dataset.noTransitions}),1)}})},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(0),i=n(2),o=(n(4),n(22));function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n){var l=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];s(this,e),this._variation=d,this._images=n,this._dom={container:t,slideshow:null,slides:null},this._handlers={fit:function(){var e=!0,t=!1,n=void 0;try{for(var a,o=l.images.entries()[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var s=r(a.value,2),d=s[0],c=s[1];Object(i.a)(l._dom.container,l._dom.slides.children[d].children[0],c.core_meta.image.size)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},this._dom.slideshow=a.create("div",{class:"slideshow slideshow--thumbs"});var u=a.create("div",{class:"slideshow__container"});this._dom.slideshow.appendChild(u);var h=a.create("div",{class:"slideshow__slider"});u.appendChild(h);var m=a.create("div",{class:"slideshow__nav","data-slideshow-nav":""});u.appendChild(m),this._dom.slides=a.create("div",{class:"slideshow__slides","data-slideshow-slides":""}),h.appendChild(this._dom.slides);var _=!0,p=!1,f=void 0;try{for(var v,y=this.images.entries()[Symbol.iterator]();!(_=(v=y.next()).done);_=!0){var g=r(v.value,2),w=g[0],b=g[1],k=a.create("div",{class:"slide","data-slideshow-slide":""});this._dom.slides.appendChild(k);var x=a.create("div",{class:"slide__image",style:"\n                        background-image: url(".concat(b.url,");\n                    ")});if(k.appendChild(x),c){var C=a.create("a",{class:"big-screen__open-link",href:this._images[w].url,target:"_blank",title:"Open image in a new window"});x.appendChild(C)}var S=null;S=this._images[w].variations.thumb?this._images[w].variations.thumb.url:this._images[w].variations.card.url;var T=a.create("div",{class:"slideshow__nav-item",style:"background-image: url(".concat(S,");")});m.appendChild(T)}}catch(e){p=!0,f=e}finally{try{_||null==y.return||y.return()}finally{if(p)throw f}}this._dom.container.appendChild(this._dom.slideshow),this._slideshow=new o.a(this._dom.slideshow),this._slideshow.init(),c&&(a.listen(window,{resize:this._handlers.fit}),setTimeout((function(){l._handlers.fit()}),0))}var t,n,d;return t=e,(n=[{key:"destroy",value:function(){this._slideshow.destroy(),a.ignore(window,{resize:this._handlers.fit}),this._dom.container.removeChild(this._dom.slideshow)}},{key:"images",get:function(){var e=[],t=!0,n=!1,a=void 0;try{for(var i,o=this._images[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var r=i.value,s=r.ext;this._variation?e.push(r.variations[this._variation]):".gif"===s?e.push(r):e.push(r.variations.full)}}catch(e){n=!0,a=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return e}},{key:"slideshow",get:function(){return this._slideshow}}])&&l(t.prototype,n),d&&l(t,d),e}()},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var a=n(0);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dom={nav:a.one("[data-slideshow-nav]",t),next:a.one("[data-slideshow-next]",t),prev:a.one("[data-slideshow-prev]",t),slides:a.one("[data-slideshow-slides]",t),slideshow:t},this._handlers={nav:function(e){if(e.target!==n._dom.nav){e.stopPropagation();var t=Array.prototype.indexOf.call(n._dom.nav.children,e.target);n.showSlide(t)}},next:function(e){n.showSlide(n.nextSlideIndex)},prev:function(e){n.showSlide(n.prevSlideIndex)}},this._slideIndex=-1}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){a.ignore(this._dom.nav,{click:this._handlers.nav}),this._dom.next&&a.ignore(this._dom.next,{click:this._handlers.next}),this._dom.prev&&a.ignore(this._dom.prev,{click:this._handlers.prev})}},{key:"init",value:function(){this._dom.slideshow._slideshow=this,a.listen(this._dom.nav,{click:this._handlers.nav}),this._dom.next&&a.listen(this._dom.next,{click:this._handlers.next}),this._dom.prev&&a.listen(this._dom.prev,{click:this._handlers.prev}),this.showSlide(0)}},{key:"next",value:function(){-1!==this.nextSlideIndex&&this.showSlide(this.nextSlideIndex)}},{key:"prev",value:function(){-1!==this.prevSlideIndex&&this.showSlide(this.prevSlideIndex)}},{key:"showSlide",value:function(e){e!==this._slideIndex&&(e<0||e>=this.slideCount||(this._dom.prev&&(delete this._dom.prev.dataset.disabled,0===e&&(this._dom.prev.dataset.disabled="")),this._dom.next&&(delete this._dom.next.dataset.disabled,e===this.slideCount-1&&(this._dom.next.dataset.disabled="")),this._dom.slides.style.left="-".concat(100*e,"%"),this._slideIndex>-1&&delete this._dom.nav.children[this._slideIndex].dataset.active,this._dom.nav.children[e].dataset.active="",this._slideIndex=e))}},{key:"nextSlideIndex",get:function(){return this._slideIndex>=this._dom.slides.children.length-1?-1:this._slideIndex+1}},{key:"prevSlideIndex",get:function(){return this._slideIndex<=0?-1:this._slideIndex-1}},{key:"slideCount",get:function(){return this._dom.slides.children.length}},{key:"slide",get:function(){return this._slideIndex}}])&&i(t.prototype,n),o&&i(t,o),e}();function r(){var e=!0,t=!1,n=void 0;try{for(var i,r=a.many("[data-slideshow]")[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var s=i.value;new o(s).init()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}window.MANHATTAN_CONTENT_BASE_URL&&new MutationObserver((function(e){var t=!0,n=!1,a=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value,l=!0,d=!1,c=void 0;try{for(var u,h=s.addedNodes[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var m=u.value;if(m.dataset&&"slideshowSnippet"in m.dataset)new o(m).init()}}catch(e){d=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(d)throw c}}}}catch(e){n=!0,a=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}})).observe(document.body,{childList:!0,subtree:!0})}},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var a=n(0),i=n(5);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dom={twentyTwenty:null},this._dom.twentyTwenty=t,this._drag={layerElm:null,origin:null,viewing:null},this._handlers={drag:function(e){if(null!==n._drag.origin){var t=(Object(i.a)(e)[0]-n._drag.origin)/n._dom.twentyTwenty.getBoundingClientRect().width*100,a=Math.max(5,Math.min(100,n._drag.viewing-t));n._drag.layerElm.style.width="".concat(a,"%")}},endDrag:function(e){null!==n._drag.origin&&("mouseout"!==e.type||!e.relatedTarget&&null===e.toElement)&&(e.preventDefault(),n._drag={layerElm:null,origin:null,viewing:null})},startDrag:function(e){"mousedown"===e.type&&0!==e.button||(e.preventDefault(),n._drag={layerElm:e.currentTarget,origin:Object(i.a)(e)[0],viewing:parseInt(e.currentTarget.style.width.replace("%",""),10)})}}}var t,n,s;return t=e,(n=[{key:"destroy",value:function(){var e=a.many("[data-twenty-twenty-layer]",this._dom.twentyTwenty),t=!0,n=!1,i=void 0;try{for(var r,s=e.entries()[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var l=o(r.value,2),d=l[0],c=l[1];d>0&&a.ignore(c,{"mousedown touchstart":this._handlers.startDrag})}}catch(e){n=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}a.ignore(document,{"mousemove touchmove":this._handlers.drag,"mouseout mouseup touchend":this._handlers.endDrag})}},{key:"init",value:function(){var e=a.many("[data-twenty-twenty-layer]",this._dom.twentyTwenty),t=!0,n=!1,i=void 0;try{for(var r,s=e.entries()[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var l=o(r.value,2),d=l[0],c=l[1];d>0&&a.listen(c,{"mousedown touchstart":this._handlers.startDrag})}}catch(e){n=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}a.listen(document,{"mousemove touchmove":this._handlers.drag,"mouseout mouseup touchend":this._handlers.endDrag})}}])&&r(t.prototype,n),s&&r(t,s),e}();function l(){var e=a.many("[data-twenty-twenty]"),t=!0,n=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var l=o.value;new s(l).init()}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}}},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=o.tags.slice();if(r.push(o.ref),r.push(o.type),r.push("creation"),r.push(o.member.name.toLowerCase()),r.push(o.member.username.toLowerCase()),o.is_staff_pick&&r.push("staff-pick"),o.tools){var s=!0,l=!1,d=void 0;try{for(var c,u=o.tools[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var h=c.value;r.push(h.name.toLowerCase())}}catch(e){l=!0,d=e}finally{try{s||null==u.return||u.return()}finally{if(l)throw d}}}r=i(new Set(r)),this._dom={container:t,vendor:null},this._dom.vendor=a.create("div",{class:"vendor-".concat(n),"data-vendor-tags":r.join(" | ")}),this._dom.vendor.setAttribute("data-vendor-".concat(n),""),this._dom.container.appendChild(this._dom.vendor)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.vendor)}},{key:"vendor",get:function(){return this._dom.vendor}}])&&o(t.prototype,n),r&&o(t,r),e}()},25:function(e,t,n){"use strict";var a=n(0);n(20);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dom={container:t,picker:null},this._dom.picker=a.create("div",{class:"actions__collection-picker | collection-picker","data-collection-picker":""});var i=a.create("div",{class:"collection-picker__choose-field"});this._dom.picker.append(i);var o=a.create("div",{class:"collection-picker__field field field--select"});i.append(o);var r=a.create("select",{class:"field__input","data-collection-picker-select":""});o.appendChild(r);var s=a.create("div",{class:"collection-picker__btn","data-collection-picker-add":""});i.appendChild(s);var l=a.create("a",{href:"/collections/add?creation=".concat(n._id),class:"collection-picker__link"});l.textContent="Add new collection",this._dom.picker.appendChild(l),t.appendChild(this._dom.picker)}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.picker)}},{key:"picker",get:function(){return this._dom.picker}}])&&i(t.prototype,n),o&&i(t,o),e}();function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dom={container:t,socialShare:null};var i=n.url;this._dom.socialShare=a.create("ul",{class:"actions__social-share | social-share","data-toggle":"[data-share]"});var o=a.create("li",{class:"social-share__item"}),r=a.create("a",{href:"https://www.facebook.com/sharer.php?u=".concat(i),target:"_blank",class:"social-share__link social-share__link--facebook"});o.appendChild(r),this._dom.socialShare.appendChild(o);var s=a.create("li",{class:"social-share__item"}),l=a.create("a",{href:"https://twitter.com/share?url=".concat(i),target:"_blank",class:"social-share__link social-share__link--twitter"});s.appendChild(l),this._dom.socialShare.appendChild(s);var d=a.create("li",{class:"social-share__item"}),c=a.create("a",{href:"http://pinterest.com/pin/create/button/?url=".concat(i),target:"_blank",class:"social-share__link social-share__link--pinterest"});d.appendChild(c),this._dom.socialShare.appendChild(d),t.appendChild(this._dom.socialShare)}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.socialShare)}}])&&r(t.prototype,n),i&&r(t,i),e}();function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",(function(){return c}));var c=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(l(this,e),this._dom={container:t,actions:null},this._dom.actions=a.create("div",{class:"actions"}),i){var r=a.create("div",{class:"actions__item actions__item--edit"}),d=a.create("a",{href:"/creations/edit?creation=".concat(n._id),class:"actions__link",title:"Edit"});r.appendChild(d),this._dom.actions.appendChild(r)}var c=a.create("div",{class:"actions__item actions__item--like"}),u=a.create("a",{href:"/sign-in?next=".concat(n.url),class:"actions__link","data-like":n._id,"data-like-type":"creation","data-like-toggle":"",title:"Like"});c.appendChild(u),this._dom.actions.appendChild(c);var h=a.create("div",{class:"actions__item actions__item--share","data-share":""}),m=a.create("div",{class:"actions__link","data-toggle":"[data-share]","data-toggle-close-on-blur":"",title:"Share"});h.appendChild(m);new s(h,n);this._dom.actions.appendChild(h);var _=a.create("div",{class:"actions__item actions__item--save","data-save":""}),p=a.create("a",{href:"/sign-in?next=".concat(n.url),class:"actions__link","data-collect":n._id,title:"Save to collection"});_.appendChild(p);new o(_,n);this._dom.actions.appendChild(_),t.appendChild(this._dom.actions)}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){this._dom.container.removeChild(this._dom.actions)}},{key:"actions",get:function(){return this._dom.actions}}])&&d(t.prototype,n),i&&d(t,i),e}()},3:function(e,t,n){"use strict";function a(e){var t=!0,n=!1,a=void 0;try{for(var i,o=document.cookie.split(";")[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var r=i.value;if(0===(r=r.trim()).indexOf("".concat(e,"=")))return r.split("=",2)[1]}}catch(e){n=!0,a=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return null}function i(e){if(-1===e.indexOf("\\"))return e;var t=e;return t=(t=(t=t.slice(1,-1).replace(/\\"/g,'"')).replace(/\\(\d{3})/g,(function(e,t){return String.fromCharCode(parseInt(t,8))}))).replace(/\\\\/g,"\\")}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))},4:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={breakpoints:{small:480,medium:768,large:976,xlarge:1256},supported_image_extensions:[".gif",".jpe",".jpeg",".jfi",".jif",".jfif",".jpg",".png"]}},43:function(e,t,n){e.exports=n.p+"sounds/follow.3a06a938d8fb41119f7ab0c0a1080603.mp3"},44:function(e,t,n){e.exports=n.p+"sounds/like.ef0f376594b57509c385d57c8cda61d2.mp3"},5:function(e,t,n){"use strict";function a(e){return void 0===e.pageX?[e.touches[0].pageX,e.touches[0].pageY]:[e.pageX,e.pageY]}n.d(t,"a",(function(){return a}))},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a=n(0);function i(){var e=a.one("[data-flash].flash--overlay");e&&e.remove()}function o(e,t){var n=a.one("[data-flash]");n&&n.remove();var i=a.create("div",{class:"flash flash--".concat(e),"data-flash":""}),o=a.create("div",{class:"flash__message"});o.textContent=t;var r=a.create("div",{class:"flash__close","data-flash-close":""});i.appendChild(o),i.appendChild(r),"expandedViewInitialized"in document.body.dataset||"bigScreenInitialized"in document.body.dataset?(i.classList.add("flash--overlay"),document.body.appendChild(i)):(i.classList.add("flash--insert"),a.one("[data-page-header]").appendChild(i))}}});